{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"optics-ts","text":"<p><code>optics-ts</code> \u4e3a TypeScript \u63d0\u4f9b\u7c7b\u578b\u5b89\u5168\u3001\u7b26\u5408\u4eba\u4f53\u5de5\u7a0b\u5b66\u3001\u591a\u6001\u7684\u5149\u5b66\u5143\u7d20</p> <ul> <li>\u8bb8\u591a\u5149\u5b66\u7c7b\u578b\uff1a\u955c\u5934\u3001\u68f1\u955c\u3001\u904d\u5386\u3001\u83b7\u53d6\u5668\u3001\u4eff\u5c04\u6298\u53e0\u3001\u6298\u53e0\u3001\u8bbe\u7f6e\u5668</li> <li>\u7528\u4e8e\u64cd\u4f5c\u591a\u79cd\u6570\u636e\u7c7b\u578b\u7684\u5149\u5b66\u5143\u7d20\uff1a\u5bf9\u8c61\u3001\u6570\u7ec4\u3001\u8fa8\u8bc6\u8054\u5408\u3001\u5b57\u7b26\u4e32\u3002</li> <li>\u53ef\u79fb\u9664\u7684\u5149\u5b66\u5143\u7d20\uff1a\u5141\u8bb8\u4ece\u5bb9\u5668\u4e2d\u79fb\u9664\u9879\u76ee\u3002</li> <li>\u4eba\u4f53\u5de5\u7a0b\u5b66 API\uff1a\u65e0\u6837\u677f\u6587\u4ef6\uff0c\u7b80\u6d01\u7684\u547d\u540d\u3002</li> <li>\u7c7b\u578b\u5b89\u5168\uff1a\u7f16\u8bd1\u5668\u5c06\u5bf9\u60a8\u8fdb\u884c\u7684\u6240\u6709\u64cd\u4f5c\u8fdb\u884c\u7c7b\u578b\u68c0\u67e5\u3002\u6c38\u8fdc\u4e0d\u4f1a\u6709 <code>any</code>\u3002</li> <li>\u5927\u591a\u6570\u5149\u5b66\u5143\u7d20\u90fd\u662f\u5b8c\u5168\u591a\u6001\u7684\uff1a\u60a8\u53ef\u4ee5\u7f16\u5199\u4e0d\u540c\u7684\u6570\u636e\u7c7b\u578b\u5e76\u4ecd\u7136\u83b7\u5f97\u5b8c\u5168\u7684\u7c7b\u578b\u5b89\u5168\u6027\u3002</li> <li>\u5728\u5355\u4e00\u4ee3\u7801\u5e93\u4e2d\u652f\u6301 ES6 \u548c CommonJS \u6a21\u5757\u3002</li> <li>\u901a\u8fc7\u72ec\u7acb\u5149\u5b66\u5143\u7d20\u652f\u6301\u6811\u6447\u52a8\uff08\u8bf7\u53c2\u89c1\u4e24\u79cd\u8bed\u6cd5\uff09\u3002</li> </ul>"},{"location":"#example","title":"\u793a\u4f8b","text":"\u65b9\u6cd5\u94fe\u72ec\u7acb <pre><code>import * as O from 'optics-ts'\n\ntype Book = {\n  title: string\n  isbn: string\n  author: {\n    name: string\n  }\n}\n\n// \u521b\u5efa\u4e00\u4e2a\u805a\u7126\u4e8e author.name \u7684\u955c\u5934\nconst optic = O.optic_&lt;Book&gt;()\n  .prop('author')\n  .prop('name')\n\n// \u8fd9\u662f\u8f93\u5165\u6570\u636e\nconst input: Book = {\n  title: \"\u94f6\u6cb3\u7cfb\u6f2b\u6e38\u6307\u5357\"\n  isbn: \"978-0345391803\",\n  author: {\n    name: \"\u9053\u683c\u62c9\u65af\u00b7\u4e9a\u5f53\u65af\"\n  }\n}\n\n// \u901a\u8fc7\u5149\u5b66\u5143\u7d20\u8bfb\u53d6\nO.get(optic)(input)\n// \"\u9053\u683c\u62c9\u65af\u00b7\u4e9a\u5f53\u65af\"\n\n// \u901a\u8fc7\u5149\u5b66\u5143\u7d20\u5199\u5165\nO.set(optic)(\"\u4e9a\u745f\u00b7\u767b\u7279\")(input)\n// {\n//   title: \"\u94f6\u6cb3\u7cfb\u6f2b\u6e38\u6307\u5357\"\n//   isbn: \"978-0345391803\",\n//   author: {\n//     name: \"\u4e9a\u745f\u00b7\u767b\u7279\"\n//   }\n// }\n\n// \u901a\u8fc7\u5149\u5b66\u5143\u7d20\u66f4\u65b0\u73b0\u6709\u503c\uff0c\u540c\u65f6\u4e5f\u6539\u53d8\u6570\u636e\u7c7b\u578b\nO.modify(optic)(str =&gt; str.length + 29)(input)\n// {\n//   title: \"\u94f6\u6cb3\u7cfb\u6f2b\u6e38\u6307\u5357\"\n//   isbn: \"978-0345391803\",\n//   author: {\n//     name: 42\n//   }\n// }\n</code></pre> <pre><code>import * as O from 'optics-ts/standalone'\n\n// \u521b\u5efa\u4e00\u4e2a\u805a\u7126\u4e8e author.name \u7684\u955c\u5934\nconst optic = O.compose('author', 'name')\n\n// \u8fd9\u662f\u8f93\u5165\u6570\u636e\nconst input = {\n  title: \"\u94f6\u6cb3\u7cfb\u6f2b\u6e38\u6307\u5357\"\n  isbn: \"978-0345391803\",\n  author: {\n    name: \"\u9053\u683c\u62c9\u65af\u00b7\u4e9a\u5f53\u65af\"\n  }\n}\n\n// \u901a\u8fc7\u5149\u5b66\u5143\u7d20\u8bfb\u53d6\nO.get(optic, input)\n// \"\u9053\u683c\u62c9\u65af\u00b7\u4e9a\u5f53\u65af\"\n\n// \u901a\u8fc7\u5149\u5b66\u5143\u7d20\u5199\u5165\nO.set(optic, \"\u4e9a\u745f\u00b7\u767b\u7279\", input)\n// {\n//   title: \"\u94f6\u6cb3\u7cfb\u6f2b\u6e38\u6307\u5357\"\n//   isbn: \"978-0345391803\",\n//   author: {\n//     name: \"\u4e9a\u745f\u00b7\u767b\u7279\"\n//   }\n// }\n\n// \u901a\u8fc7\u5149\u5b66\u5143\u7d20\u66f4\u65b0\u73b0\u6709\u503c\uff0c\u540c\u65f6\u4e5f\u6539\u53d8\u6570\u636e\u7c7b\u578b\nO.modify(optic, (str) =&gt; str.length + 29, input)\n// {\n//   title: \"\u94f6\u6cb3\u7cfb\u6f2b\u6e38\u6307\u5357\"\n//   isbn: \"978-0345391803\",\n//   author: {\n//     name: 42\n//   }\n// }\n</code></pre> <p>\u6709\u5173\u65b9\u6cd5\u94fe\u548c\u72ec\u7acb\u8bed\u6cd5\u4e4b\u95f4\u7684\u5dee\u5f02\u7684\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u89c1\u4e24\u79cd\u8bed\u6cd5\u3002</p>"},{"location":"installation/","title":"\u5b89\u88c5","text":"<p>\u4f7f\u7528 npm:</p> <pre><code>npm install --save optics-ts\n</code></pre> <p>\u4f7f\u7528 yarn:</p> <pre><code>yarn add optics-ts\n</code></pre>"},{"location":"installation/#requirements","title":"\u8981\u6c42","text":"<p>\u9700\u8981 TypeScript &gt;= 4.1 \u548c <code>strictNullChecks</code> \u7f16\u8bd1\u5668\u9009\u9879\u3002</p> <p>\u6211\u5f3a\u70c8\u5efa\u8bae\u5728\u60a8\u7684\u9879\u76ee\u7684 <code>tsconfig.json</code> \u4e2d\u542f\u7528\u6240\u6709\u4e25\u683c\u9009\u9879\uff1a</p> <pre><code>{\n  \"compilerOptions\": {\n    \"strict\": true\n  }\n}\n</code></pre> <p>\u5982\u679c\u60a8\u7684\u9879\u76ee\u65e0\u6cd5\u505a\u5230\u8fd9\u4e00\u70b9\uff0c\u53ea\u542f\u7528 <code>strictNullChecks</code> \u9009\u9879\uff1a</p> <pre><code>{\n  \"compilerOptions\": {\n    \"strictNullChecks\": true\n  }\n}\n</code></pre>"},{"location":"prior-art/","title":"\u73b0\u6709\u6280\u672f","text":"<p>JavaScript\u6709\u8bb8\u591a\u4e0d\u540c\u7a0b\u5ea6\u7684\u5149\u5b66\u5e93\uff0c\u4f46TypeScript\u7684\u5149\u5b66\u5e93\u5374\u5f88\u5c11\u3002\u5728TypeScript\u4e2d\u521b\u5efa\u597d\u7684\u5149\u5b66\u7c7b\u578b\u901a\u5e38\u5f88\u56f0\u96be\uff0c\u5982\u679c\u8bd5\u56fe\u5728\u73b0\u6709\u7684JavaScript\u5b9e\u73b0\u4e0a\u6dfb\u52a0\u7c7b\u578b\uff0c\u4efb\u52a1\u5c31\u53d8\u5f97\u4e0d\u53ef\u80fd\u3002</p> <ul> <li> <p>partial.lenses \u53ef\u4ee5\u8bf4\u662fJavaScript\u6700\u5168\u9762\u3001\u6700\u4f18\u96c5\u7684\u5149\u5b66\u5e93\uff0c\u4e5f\u662foptics-ts\u7684\u7075\u611f\u6765\u6e90\u3002</p> </li> <li> <p>monocle-ts \u53ef\u80fd\u662f\u6700\u53d7\u6b22\u8fce\u7684TypeScript\u5149\u5b66\u5e93\u3002</p> </li> <li> <p>@grammarly/focal \u5e76\u4e0d\u662f\u4e00\u4e2a\u5149\u5b66\u5e93\uff0c\u800c\u662f\u4e00\u4e2aTypeScript\u7684UI\u6846\u67b6\u3002</p> </li> </ul> <p>\u5149\u5b66\u7c7b\u7684\u547d\u540d\u53d7\u5230\u4e86Oleg Grenrus\u7684Glassery\u7684\u542f\u53d1\u3002</p>"},{"location":"reference-interop/","title":"\u4e92\u64cd\u4f5c\u6027","text":"<p>\u5b9e\u9a8c\u6027</p> <p>\u6b64\u6a21\u5757\u5904\u4e8e\u5b9e\u9a8c\u9636\u6bb5\uff0c\u53ef\u80fd\u4f1a\u5728\u4e0d\u5bf9\u5e94\u7684semver bump\u7684\u60c5\u51b5\u4e0b\u63a5\u6536\u5230\u5411\u540e\u4e0d\u517c\u5bb9\u7684\u66f4\u6539\u3002</p> <p>\u81eaoptics-ts v2.2.0\u8d77\uff0c\u5149\u5b66\u6709\u4e24\u79cd\u8bed\u6cd5\uff1a\u65b9\u6cd5\u94fe\u548c\u72ec\u7acb\u5149\u5b66\u3002\u8fd9\u91cc\u8bb0\u5f55\u7684_\u4e92\u64cd\u4f5c\u6027API_\u5b9a\u4e49\u4e86\u4e24\u79cd\u8bed\u6cd5\u4e4b\u95f4\u7684\u6865\u6881\uff0c\u4f8b\u5982\uff0c\u7ed9\u4e88\u5e93\u4f5c\u8005\u81ea\u7531\uff0c\u5141\u8bb8\u4ed6\u4eec\u7684\u7528\u6237\u4f7f\u7528\u4efb\u4e00\u79cd\u8bed\u6cd5\u3002</p> <p>\u4ee5\u4e0b\u6240\u6709\u5185\u5bb9\u90fd\u5047\u8bbe\u6709\u5982\u4e0b\u5bfc\u5165\uff1a</p> <pre><code>import * as I from 'optics-ts/interop'\n</code></pre> <p>\u6b64\u6a21\u5757\u5b9a\u4e49\u4e86\u4ee5\u4e0b\u51fd\u6570\uff1a</p> <ul> <li><code>I.get :: (optic, value) =&gt; value</code></li> <li><code>I.preview :: (optic, value) =&gt; value | undefined</code></li> <li><code>I.collect :: (optic, value) =&gt; value[]</code></li> <li><code>I.modify :: (optic, fn, value) =&gt; value</code></li> <li><code>I.set :: (optic, fn, value) =&gt; value</code></li> </ul> <p>\u8fd9\u4e9b\u51fd\u6570\u7684<code>optic</code>\u53c2\u6570\u53ef\u4ee5\u662f\uff1a</p> <ul> <li>\u65b9\u6cd5\u94fe\u5149\u5b66</li> <li>\u72ec\u7acb\u5149\u5b66</li> </ul> <p>\u5426\u5219\uff0c\u8fd9\u4e9b\u51fd\u6570\u7684\u5de5\u4f5c\u65b9\u5f0f\u4e0e\u4efb\u4e00API\u4e2d\u7684\u5bf9\u5e94\u64cd\u4f5c\u5b8c\u5168\u76f8\u540c\u3002</p>"},{"location":"reference-intro/","title":"\u4ecb\u7ecd","text":""},{"location":"reference-intro/#what-are-optics?","title":"\u4ec0\u4e48\u662f\u5149\u5b66?","text":"<p>\u5149\u5b66\u662f\u4e00\u79cd\u63cf\u8ff0\u6570\u636e\u7ed3\u6784\u4e2d\u7684\"\u8def\u5f84\"\u7684\u65b9\u5f0f\uff0c\u5373\u96c6\u4e2d\u5173\u6ce8\u6570\u636e\u7ed3\u6784\u7684\u4e00\u90e8\u5206\u3002\u8fd9\u88ab\u79f0\u4e3a\u5149\u5b66\u7684\u7126\u70b9\u3002\u7136\u800c\uff0c\u5149\u5b66\u5e76\u4e0d\u7ed1\u5b9a\u5230\u6570\u636e\u7ed3\u6784\u7684\u4efb\u4f55\u7279\u5b9a\u503c\uff0c\u800c\u662f\u81ea\u8eab\u7684\u72ec\u7acb\u503c\u3002</p> <p>\u5149\u5b66\u662f\u53ef\u7ec4\u5408\u7684\uff0c\u610f\u5473\u7740\u4f60\u53ef\u4ee5\u5c06\u4e24\u4e2a\u5149\u5b66\u7ec4\u5408\u5728\u4e00\u8d77\u6784\u9020\u51fa\u53e6\u4e00\u4e2a\u5149\u5b66\uff0c\u8be5\u5149\u5b66\u7ed3\u5408\u4e86\u524d\u4e24\u8005\u7684\u8bed\u4e49\u3002\u8fd9\u4f7f\u5f97\u53ef\u4ee5\u4ece\u57fa\u672c\u5149\u5b66\u6784\u9020\u590d\u6742\u7684\u5149\u5b66\uff0c\u4f7f\u5b83\u4eec\u9002\u7528\u4e8e\u5404\u79cd\u4e0d\u540c\u7684\u6570\u636e\u7ed3\u6784\u3002</p> <p>\u6700\u7ec8\uff0c\u5149\u5b66\u53ef\u4ee5\u7528\u4e8e\u4ece\u4e0e\u5149\u5b66\u517c\u5bb9\u7684\u7ed9\u5b9a\u6570\u636e\u7ed3\u6784\u4e2d\u8bfb\u53d6\u5176\u7126\u70b9\u4e2d\u7684\u503c\u3002\u5b83\u4e5f\u53ef\u4ee5\u7528\u4e8e\u4ee5_\u4e0d\u53ef\u53d8_\u7684\u65b9\u5f0f\u4fee\u6539\u5176\u7126\u70b9\u4e2d\u7684\u503c\uff0c\u5373\u4fdd\u6301\u539f\u59cb\u6570\u636e\u7ed3\u6784\u4e0d\u53d8\u3002</p>"},{"location":"reference-intro/#types-of-optics","title":"\u5149\u5b66\u7684\u7c7b\u578b","text":"<p>optics-ts\u652f\u6301\u7684\u5149\u5b66\u7c7b\u578b\u6709\u7b49\u4ef7\u6027(Equivalence)\u3001\u540c\u6784(Iso)\u3001\u955c\u5934(Lens)\u3001\u68f1\u955c(Prism)\u3001\u904d\u5386(Traversal)\u3001\u83b7\u53d6\u5668(Getter)\u3001\u4eff\u5c04\u6298\u53e0(AffineFold)\u3001\u6298\u53e0(Fold)\u548c\u8bbe\u7f6e\u5668(Setter)\u3002\u6b64\u5916\uff0c\u8fd8\u6709\u53ef\u79fb\u9664\u68f1\u955c(RemovablePrism)\uff0c\u8fd9\u662f\u68f1\u955c\u7684\u4e00\u4e2a\u7279\u4f8b\u3002</p> <p>\u8fd9\u4e9b\u7c7b\u578b\u4e3b\u8981\u5728\u5b83\u4eec\u53ef\u80fd\u6709\u7684\u7126\u70b9\u6570\u91cf\u4ee5\u53ca\u5b83\u4eec\u662f\u8bfb/\u5199\u3001\u53ea\u8bfb\u8fd8\u662f\u53ea\u5199\u4e0a\u6709\u6240\u4e0d\u540c\u3002\u4e0b\u8868\u603b\u7ed3\u4e86\u8fd9\u4e9b\u5c5e\u6027\uff1a</p> \u7c7b\u578b \u7126\u70b9 \u8bfb/\u5199 \u7b49\u4ef7\u6027(Equivalence) 1 R/W \u540c\u6784(Iso) 1 R/W \u955c\u5934(Lens) 1 R/W \u68f1\u955c(Prism) 0..1 R/W \u53ef\u79fb\u9664\u68f1\u955c(RemovablePrism) 0..1 R/W \u904d\u5386(Traversal) 0..n R/W \u83b7\u53d6\u5668(Getter) 1 R \u4eff\u5c04\u6298\u53e0(AffineFold) 0..1 R \u6298\u53e0(Fold) 0..n R \u8bbe\u7f6e\u5668(Setter) 1 W"},{"location":"reference-intro/#rules-of-composition","title":"\u7ec4\u5408\u89c4\u5219","text":"<p>\u4efb\u4f55\u8bfb/\u5199\u548c\u53ea\u8bfb\u5149\u5b66\u90fd\u53ef\u4ee5\u4e0e\u53e6\u4e00\u4e2a\u8bfb/\u5199\u548c\u53ea\u8bfb\u5149\u5b66\u7ec4\u5408\u3002\u53ef\u4ee5\u4ece\u8fd9\u4e2a\u56fe\u8868\u4e2d\u786e\u5b9a\u7ed3\u679c\u5149\u5b66\u7684\u7c7b\u578b\uff1a</p> <pre><code>\u7b49\u4ef7\u6027(Equivalence) -&gt; \u540c\u6784(Iso) -&gt; \u955c\u5934(Lens) ---&gt; \u68f1\u955c(Prism) ------&gt; \u904d\u5386(Traversal)\n                      |         |             |\n                      v         v             v\n                      \u83b7\u53d6\u5668(Getter) -&gt; \u4eff\u5c04\u6298\u53e0(AffineFold) -&gt; \u6298\u53e0(Fold)\n</code></pre> <p>\u5f53\u4f60\u7ec4\u5408\u4e24\u4e2a\u5149\u5b66A\u548cB\u65f6\uff0c\u7ed3\u679c\u662f\u4eceA\u548cB\u5f00\u59cb\u6cbf\u7740\u7bad\u5934\u5f97\u5230\u7684\u6700\u8fd1\u7684\u5149\u5b66\u3002</p> <p>\u4f8b\u5982\uff0c\u5c06\u83b7\u53d6\u5668(Getter)\u4e0e\u904d\u5386(Traversal)\u7ec4\u5408\u4f1a\u5f97\u5230\u4e00\u4e2a\u6298\u53e0(Fold)\u3002\u5c06\u540c\u6784(Iso)\u4e0e\u68f1\u955c(Prism)\u7ec4\u5408\u4f1a\u5f97\u5230\u4e00\u4e2a\u68f1\u955c(Prism)\u3002</p> <p>\u8bbe\u7f6e\u5668(Setter)\u662f\u7279\u6b8a\u7684\u3002\u4f60\u53ea\u80fd\u5c06\u53ef\u5199\u5149\u5b66\u4e0e\u8bbe\u7f6e\u5668(Setter)\u7ec4\u5408\u3002\u8bbe\u7f6e\u5668\u4e0d\u80fd\u4e0e\u4efb\u4f55\u5176\u4ed6\u5149\u5b66\u8fdb\u4e00\u6b65\u7ec4\u5408\u3002</p> <p>\u53ef\u79fb\u9664\u68f1\u955c(RemovablePrism)\u7684\u884c\u4e3a\u50cf\u4e00\u4e2a\u5e38\u89c4\u68f1\u955c\uff0c\u4f46\u5b83\u53ef\u4ee5\u7528\u6765\u4ece\u5176\u7236\u5bb9\u5668\u4e2d\u79fb\u9664\u7126\u70b9\u3002\u5f53\u4e0e\u5176\u4ed6\u5149\u5b66\u7ec4\u5408\u65f6\uff0c\u50cf(\u5e76\u53d8\u56de)\u4e00\u4e2a\u5e38\u89c4\u68f1\u955c\u3002</p>"},{"location":"reference-mc/","title":"\u65b9\u6cd5\u94fe API","text":"<p>\u6ce8\u610f</p> <pre><code>\u81ea optics-ts v2.2.0 \u8d77\uff0c\u5149\u5b66\u6709\u4e24\u79cd\u8bed\u6cd5\uff1a**\u65b9\u6cd5\u94fe**\n\u548c **\u72ec\u7acb\u5149\u5b66**\u3002\u5173\u4e8e\u5b83\u4eec\u4e4b\u95f4\u7684\u533a\u522b\u7684\u66f4\u591a\u4fe1\u606f\uff0c\n\u8bf7\u53c2\u89c1 [\u4e24\u79cd\u8bed\u6cd5](two-syntaxes.md)\u3002\n</code></pre> <p>\u4ee5\u4e0b\u6240\u6709\u5185\u5bb9\u90fd\u5047\u8bbe\u6709\u5982\u4e0b\u5bfc\u5165\uff1a</p> <pre><code>import * as O from 'optics-ts'\n</code></pre> <p>\u5149\u5b66\u901a\u8fc7\u65b9\u6cd5\u94fe\u8fdb\u884c\u7ec4\u5408\u3002\u8fd9\u610f\u5473\u7740\u6bcf\u79cd\u5149\u5b66\u7c7b\u578b\u90fd\u6709 \u5927\u90e8\u5206\u4e0b\u9762\u6587\u6863\u4e2d\u8bb0\u5f55\u7684\u65b9\u6cd5\uff0c\u65e0\u8bba\u8be5\u65b9\u6cd5\u521b\u5efa\u7684\u5149\u5b66\u7c7b\u578b\u662f\u4ec0\u4e48\u3002 \u552f\u4e00\u7684\u533a\u522b\u662f\u8fd4\u56de\u7c7b\u578b\uff0c\u7531\u4e0a\u8ff0\u7ec4\u5408\u89c4\u5219\u786e\u5b9a\u3002</p> <p>\u4f8b\u5982\uff0c\u5047\u8bbe\u6211\u4eec\u6709\u4e00\u4e2a\u53d8\u91cf <code>myLens</code>\uff0c\u5b83\u6301\u6709\u4e00\u4e2a <code>Lens</code>\uff0c\u5e76\u5728\u5176\u4e0a\u8c03\u7528 <code>.optional()</code>\uff1a</p> <pre><code>const newOptic = myLens.optional()\n</code></pre> <p><code>.optional()</code> \u521b\u5efa\u4e00\u4e2a\u68f1\u955c\uff0c\u6240\u4ee5 <code>newOptic</code> \u5c06\u662f\u955c\u5934\u548c \u68f1\u955c\u7684\u7ec4\u5408\uff0c\u5373\u4e00\u4e2a\u68f1\u955c\u3002</p> <p>\u6bcf\u79cd\u5149\u5b66\u7c7b\u578b\u5177\u6709\u54ea\u4e9b\u65b9\u6cd5\u53d6\u51b3\u4e8e\u5728 \u7ec4\u5408\u89c4\u5219 \u4e2d\u63d0\u51fa\u7684\u7ec4\u5408\u89c4\u5219\u3002\u4f8b\u5982\uff0c <code>.prop()</code> \u65b9\u6cd5\u521b\u5efa\u4e00\u4e2a\u955c\u5934\uff0c\u6240\u4ee5 getter \u6709\u8fd9\u4e2a\u65b9\u6cd5\uff0c\u56e0\u4e3a\u4f60\u53ef\u4ee5 \u7ec4\u5408\u4e00\u4e2a getter \u548c\u4e00\u4e2a\u955c\u5934\u3002\u53e6\u4e00\u65b9\u9762\uff0c<code>.appendTo()</code> \u65b9\u6cd5\uff0c\u5b83 \u521b\u5efa\u4e00\u4e2a setter\uff0c\u5728 getter \u4e2d\u4e0d\u53ef\u7528\uff0c\u56e0\u4e3a getter \u4e0d\u80fd \u4e0e setter \u7ec4\u5408\u3002</p>"},{"location":"reference-mc/#type-parameters","title":"\u7c7b\u578b\u53c2\u6570","text":"<p>\u6240\u6709\u53ef\u5199\u5149\u5b66\u90fd\u6709 3 \u4e2a\u7c7b\u578b\u53c2\u6570\uff1a<code>&lt;S, T, A&gt;</code>\uff0c\u6240\u6709\u53ea\u8bfb \u5149\u5b66\u6709 2 \u4e2a\u7c7b\u578b\u53c2\u6570\uff1a<code>&lt;S, A&gt;</code>\uff1a</p> <ul> <li> <p><code>S</code> \u662f\u5149\u5b66\u64cd\u4f5c\u7684\u6e90</p> </li> <li> <p><code>A</code> \u662f\u7126\u70b9\u6216\u7126\u70b9\u7684\u7c7b\u578b</p> </li> <li> <p><code>T</code> \u662f\u4e00\u4e2a\u7c7b\u578b\uff0c\u5b83\u7f16\u7801\u4e86\u5982\u4f55\u7528\u591a\u6001     \u5199\u5165\u6784\u9020\u8f93\u51fa\u7c7b\u578b\uff0c\u4ee5\u53ca\u5173\u4e8e\u5149\u5b66\u7684\u53ef\u79fb\u9664\u6027\u7684\u4fe1\u606f</p> </li> </ul> <p>\u4ece\u6982\u5ff5\u4e0a\u8bb2\uff0c\u5f53\u4f60\u5199\u5165\u7c7b\u578b\u4e3a <code>B</code> \u7684\u503c\u65f6\uff0c\u8f93\u51fa\u7c7b\u578b\u5c06\u662f <code>S</code> \u5728\u5149\u5b66\u7684\u7126\u70b9\u6216\u7126\u70b9\u5904\u7531 <code>A</code> \u66ff\u6362\u4e3a <code>B</code>\u3002<code>T</code> \u5305\u542b\u4e00\u4e2a\u673a\u5236 \u5c06 <code>B</code> \u8f6c\u6362\u4e3a\u8f93\u51fa\u7c7b\u578b\u3002\u8fd9\u79cd\u6784\u9020\u4f7f\u5f97 \u5149\u5b66\u5728\u7c7b\u578b\u7ea7\u522b\u4e0a\u53ef\u4ee5\u662f\u591a\u6001\u7684\u3002\u53ea\u8bfb\u5149\u5b66\u4e0d\u9700\u8981 <code>T</code> \u56e0\u4e3a\u4f60\u4e0d\u80fd\u901a\u8fc7\u5b83\u4eec\u5199\u5165\u6216\u5220\u9664\u5b83\u4eec\u7684\u7126\u70b9\u3002</p> <p>\u5728\u4e0b\u9762\uff0c\u6211\u4eec\u4e3a\u4e86\u6e05\u6670\u8d77\u89c1\uff0c\u7701\u7565\u4e86\u6bcf\u4e2a\u5149\u5b66\u7684 <code>T</code> \u7684\u786e\u5207\u5b9a\u4e49\uff0c \u53ea\u5728\u5b83\u7684\u4f4d\u7f6e\u5199\u4e0b <code>_</code>\u3002\u901a\u5e38\u4ece\u5149\u5b66\u7684\u5de5\u4f5c\u65b9\u5f0f\u53ef\u4ee5\u6e05\u695a\u5730\u770b\u51fa\uff0c \u5982\u679c\u4f60\u5199\u5165\u4e00\u4e2a\u4e0d\u540c\u7c7b\u578b\u7684\u503c\uff0c\u4f1a\u51fa\u6765\u4ec0\u4e48\u3002</p> <p>\u5728\u53ef\u4ee5\u7528\u6765\u901a\u8fc7\u5149\u5b66\u5199\u5165\u7684\u51fd\u6570\u7684\u6587\u6863\u4e2d\uff0c \u8fd4\u56de\u7c7b\u578b\u7531 <code>T&lt;B&gt;</code> \u8868\u793a\u3002\u867d\u7136\u8fd9\u4e0d\u662f\u6709\u6548\u7684 TypeScript \u8bed\u6cd5\uff08\u56e0\u4e3a <code>T</code> \u662f\u4e00\u4e2a\u7c7b\u578b\u53c2\u6570\uff0c\u800c\u4e0d\u662f\u4e00\u4e2a\u5177\u4f53\u7684\u7c7b\u578b\uff09\uff0c\u4f46\u8fd9\u5f88\u597d\u5730\u6355\u83b7\u4e86\u542b\u4e49\uff1a <code>B</code> \u88ab\u5e94\u7528\u5230 \"\u66f4\u9ad8\u7ea7\u522b\" \u7684\u7c7b\u578b <code>T</code>\uff0c\u4ea7\u751f\u8f93\u51fa\u7c7b\u578b\u3002</p> <p>\u611f\u5174\u8da3\u7684\u8bfb\u8005\u53ef\u4ee5\u53c2\u8003 hkt.ts \u6765\u770b\u770b \u5982\u4f55\u5b9e\u9645\u5b9e\u73b0\u66f4\u9ad8\u7ea7\u522b\u7684\u7c7b\u578b/\u90e8\u5206\u5e94\u7528\u7684\u7c7b\u578b\u64cd\u4f5c\u7b26\u3002</p>"},{"location":"reference-mc/#top-level-functions","title":"\u9876\u7ea7\u51fd\u6570","text":"<p>\u8fd9\u4e9b\u51fd\u6570\u4f5c\u4e3a <code>optics-ts</code> \u6a21\u5757\u7684\u9876\u7ea7\u5bfc\u51fa\u53ef\u7528\u3002</p> <p>\u5927\u591a\u6570\u51fd\u6570\u5728\u5176\u7b7e\u540d\u4e2d\u6709 <code>Optic</code>\u3002\u8fd9\u610f\u5473\u7740\u591a\u4e2a\u5149\u5b66 \u53ef\u4ee5\u4e0e\u8be5\u51fd\u6570\u4e00\u8d77\u5de5\u4f5c\u3002\u5b9e\u9645\u9002\u7528\u7684\u5149\u5b66\u7c7b \u5728\u51fd\u6570\u63cf\u8ff0\u4e2d\u6709\u6587\u6863\u8bb0\u5f55\u3002</p>"},{"location":"reference-mc/#optic-optic","title":"<code>optic</code> {#<code>optic</code>}","text":"<p>\u7b7e\u540d\uff1a<code>optic&lt;S&gt;(): Equivalence&lt;S, _, S&gt;</code></p> <p>\u4e3a <code>S</code> \u521b\u5efa\u4e00\u4e2a\u5355\u6001\u7b49\u4ef7\u6027\u3002\u5982\u679c\u4f60\u770b\u5230\u7c7b\u578b <code>DisallowedTypeChange</code>\uff0c\u8fd9\u610f\u5473\u7740\u4f60\u8bd5\u56fe\u7528\u4e00\u4e2a \u5355\u6001\u5149\u5b66\u6539\u53d8\u4e00\u4e2a\u7c7b\u578b\u3002</p>"},{"location":"reference-mc/#optic_-optic_","title":"<code>optic_</code> {#<code>optic_</code>}","text":"<p>\u7b7e\u540d\uff1a<code>optic_&lt;S&gt;(): Equivalence&lt;S, _, S&gt;</code></p> <p>\u4e3a <code>S</code> \u521b\u5efa\u4e00\u4e2a\u591a\u6001\u7b49\u4ef7\u6027\u3002</p>"},{"location":"reference-mc/#get-get","title":"<code>get</code> {#<code>get</code>}","text":"<p>\u7b7e\u540d\uff1a<code>get&lt;S, A&gt;(optic: Optic&lt;S, _, A&gt;) =&gt; (source: S) =&gt; A</code></p> <p>\u901a\u8fc7 <code>Equivalence</code>\u3001<code>Iso</code>\u3001<code>Lens</code> \u6216 <code>Getter</code> \u8bfb\u53d6\u4e00\u4e2a\u503c\u3002</p>"},{"location":"reference-mc/#preview-preview","title":"<code>preview</code> {#<code>preview</code>}","text":"<p>\u7b7e\u540d\uff1a <code>preview&lt;S, A&gt;(optic: Optic&lt;S, _, A&gt;) =&gt; (source: S) =&gt; A | undefined</code></p> <p>\u901a\u8fc7 <code>Prism</code>\u3001<code>Traversal</code>\u3001<code>AffineFold</code> \u6216 <code>Fold</code> \u8bfb\u53d6\u4e00\u4e2a\u503c\u3002\u5bf9\u4e8e <code>Prism</code> \u548c <code>AffineFold</code>\uff0c\u5982\u679c\u5149\u5b66\u4e0d\u5339\u914d\uff08\u6ca1\u6709\u7126\u70b9\uff09\uff0c\u8fd4\u56de <code>undefined</code>\u3002\u5bf9\u4e8e <code>Traversal</code> \u548c <code>Fold</code>\uff0c\u8fd4\u56de\u7b2c\u4e00\u4e2a\u7126\u70b9\u7684\u503c\uff0c\u6216 \u5982\u679c\u6ca1\u6709\u7126\u70b9\uff0c\u5219\u8fd4\u56de <code>undefined</code>\u3002</p>"},{"location":"reference-mc/#collect-collect","title":"<code>collect</code> {#<code>collect</code>}","text":"<p>\u7b7e\u540d\uff1a<code>collect&lt;S, A&gt;(optic: Optic&lt;S, _, A&gt;) =&gt; (source: S) =&gt; A[]</code></p> <p>\u901a\u8fc7 <code>Prism</code>\u3001<code>Traversal</code>\u3001<code>AffineFold</code> \u6216 <code>Fold</code> \u8bfb\u53d6\u6240\u6709\u7126\u70b9\u503c\u3002 \u5bf9\u4e8e <code>Prism</code> \u548c <code>AffineFold</code>\uff0c\u8fd4\u56de\u503c\u662f\u4e00\u4e2a\u5305\u542b 0 \u6216 1 \u4e2a\u5143\u7d20\u7684\u6570\u7ec4\u3002 \u5bf9\u4e8e <code>Traversal</code> \u548c <code>Fold</code>\uff0c\u8fd4\u56de\u503c\u662f\u4e00\u4e2a\u5305\u542b\u96f6\u4e2a\u6216\u591a\u4e2a \u5143\u7d20\u7684\u6570\u7ec4\u3002</p>"},{"location":"reference-mc/#modify-modify","title":"<code>modify</code> {#<code>modify</code>}","text":"<p>\u7b7e\u540d\uff1a <code>modify&lt;S, T, A&gt;(optic: Optic&lt;S, T, A&gt;) =&gt; &lt;B&gt;(f: (a: A) =&gt; B) =&gt; (source: S) =&gt; T&lt;B&gt;</code></p> <p>\u901a\u8fc7 <code>Equivalence</code>\u3001<code>Iso</code>\u3001<code>Lens</code>\u3001<code>Prism</code> \u6216 <code>Traversal</code> \u4fee\u6539\u7126\u70b9\u503c\u3002\u8fd4\u56de\u4e00\u4e2a\u66f4\u65b0\u7684 <code>source</code> \u526f\u672c\uff0c\u6240\u6709\u7126\u70b9\u90fd\u901a\u8fc7 \u6620\u5c04\u5b83\u4eec\u901a\u8fc7\u51fd\u6570 <code>f</code> \u8fdb\u884c\u4fee\u6539\u3002</p>"},{"location":"reference-mc/#set-set","title":"<code>set</code> {#<code>set</code>}","text":"<p>\u7b7e\u540d\uff1a <code>set&lt;S, T, A&gt;(optic: Optic&lt;S, T, A&gt;) =&gt; &lt;B&gt;(value: B) =&gt; (source: S) =&gt; T&lt;B&gt;</code></p> <p>\u901a\u8fc7<code>Equivalence</code>\u3001<code>Iso</code>\u3001<code>Lens</code>\u3001<code>Prism</code>\u6216<code>Traversal</code>\u5199\u5165\u4e00\u4e2a\u5e38\u91cf\u503c\u3002\u8fd4\u56de\u4e00\u4e2a\u66f4\u65b0\u7684<code>source</code>\u526f\u672c\uff0c\u6240\u6709\u7126\u70b9\u90fd\u88ab<code>value</code>\u66ff\u6362\u3002</p>"},{"location":"reference-mc/#remove-remove","title":"<code>remove</code> {#<code>remove</code>}","text":"<p>\u7b7e\u540d\uff1a <code>remove&lt;S, T, A&gt;(optic: Optic&lt;S, T, A&gt;) =&gt; (source: S) =&gt; S</code></p> <p>\u4ece\u5176\u5305\u542b\u7684\u5bb9\u5668\u4e2d\u79fb\u9664<code>RemovablePrism</code>\u7684\u7126\u70b9\u3002</p>"},{"location":"reference-mc/#compose-compose","title":"<code>compose</code> {#<code>compose</code>}","text":"<p>\u7b7e\u540d\uff1a <code>compose&lt;S, A1, A2&gt;&lt;optic1: Optic&lt;S, _, A1&gt;, optic2: Optic&lt;A1, _, A2&gt;): Optic&lt;S, _, A2&gt;</code></p> <p>\u7ec4\u5408\u4e24\u4e2a\u5149\u5b66\u5143\u7d20\u3002\u5982\u679c\u7b2c\u4e00\u4e2a\u5149\u5b66\u5143\u7d20\u662f\u4ece<code>S</code>\u5230<code>A1</code>\uff0c\u7b2c\u4e8c\u4e2a\u5149\u5b66\u5143\u7d20\u662f\u4ece<code>A1</code>\u5230<code>A2</code>\uff0c\u90a3\u4e48\u7ed3\u679c\u5c31\u662f\u4ece<code>S</code>\u5230<code>A2</code>\u3002</p> <p>\u53c2\u89c1\u7ec4\u5408\u89c4\u5219\u4e86\u89e3\u7ec4\u5408\u89c4\u5219\u3002</p>"},{"location":"reference-mc/#pipe-pipe","title":"<code>pipe</code> {#<code>pipe</code>}","text":"<p>\u7b7e\u540d\uff1a <code>pipe&lt;A, B, C, ..., V&gt;(a: A, ab: (a: A) =&gt; B, bc: (b: B) =&gt; C, ...): V</code></p> <p>\u5c06\u8868\u8fbe\u5f0f(<code>a</code>)\u7684\u503c\u4f20\u5165\u6700\u591a9\u4e2a\u4e00\u5143\u51fd\u6570(<code>ab</code>, <code>bc</code>, ...)\u7684\u7ba1\u9053\u3002</p>"},{"location":"reference-mc/#creating-optics","title":"\u521b\u5efa\u5149\u5b66\u5143\u7d20","text":"<p>\u4ee5\u4e0b\u6587\u6863\u4e2d\u7684\u65b9\u6cd5\u9002\u7528\u4e8e\u6240\u6709\u5149\u5b66\u7c7b\u578b\uff1a<code>Equivalence</code>\u3001<code>Iso</code>\u3001<code>Lens</code>\u3001<code>Prism</code>\u3001<code>Traversal</code>\u3001<code>Getter</code>\u3001<code>AffineFold</code>\u548c<code>Fold</code>\u3002\u6587\u6863\u4e2d\u8fd4\u56de\u7684\u7c7b\u578b\u662f\u8fd9\u4e9b\u65b9\u6cd5\u521b\u5efa\u7684\u5149\u5b66\u5143\u7d20\u7684\u7c7b\u578b\u3002\u5b9e\u9645\u7684\u8fd4\u56de\u7c7b\u578b\u662f\u8c03\u7528\u65b9\u6cd5\u7684\u5149\u5b66\u5143\u7d20\u548c\u65b9\u6cd5\u521b\u5efa\u7684\u5149\u5b66\u5143\u7d20\u7684\u7ec4\u5408\u3002</p> <p>\u6ce8\u610f\uff0c\u6ca1\u6709\u51fd\u6570\u53ef\u4ee5\u521b\u5efa<code>AffineFold</code>\u6216<code>Fold</code>\u5149\u5b66\u5143\u7d20\u3002\u4f60\u53ea\u80fd\u901a\u8fc7\u7ec4\u5408\u5176\u4ed6\u7c7b\u578b\u7684\u5149\u5b66\u5143\u7d20\u6765\u83b7\u53d6\u8fd9\u4e9b\u3002<code>Equivalence</code>\u53ef\u4ee5\u901a\u8fc7\u8c03\u7528\u9876\u7ea7<code>optic</code>\u6216<code>optic_</code>\u51fd\u6570\u6765\u521b\u5efa\u3002</p>"},{"location":"reference-mc/#isomorphisms","title":"\u540c\u6784","text":"<p>\u540c\u6784\u5177\u6709\u7c7b\u578b<code>Iso&lt;S, T, A&gt;</code>\u3002\u5728\u4e0b\u9762\uff0c\u6211\u4eec\u4e3a\u4e86\u6e05\u6670\u8d77\u89c1\uff0c\u7701\u7565\u4e86<code>T</code>\u7684\u786e\u5207\u5b9a\u4e49\uff0c\u800c\u4f7f\u7528<code>_</code>\u4ee3\u66ff\u3002\u53c2\u89c1\u7c7b\u578b\u53c2\u6570\u4e86\u89e3\u7c7b\u578b\u53c2\u6570\u7684\u542b\u4e49\u3002</p>"},{"location":"reference-mc/#iso-iso","title":"<code>iso</code> {#<code>iso</code>}","text":"<p>\u7b7e\u540d\uff1a <code>iso&lt;U&gt;(there: (a: A) =&gt; U, back: (u: U) =&gt; A): Iso&lt;S, _, U&gt;</code></p> <p>\u901a\u8fc7\u51fd\u6570<code>there</code>\u548c<code>back</code>\u521b\u5efa\u4e00\u4e2a\u540c\u6784\u3002<code>there</code>\u63a5\u53d7\u7126\u70b9\u5e76\u5c06\u5176\u8f6c\u6362\u4e3a\u53e6\u4e00\u4e2a\u503c\u3002<code>back</code>\u662f<code>there</code>\u7684\u9006\u51fd\u6570\u3002</p> <p>\u6ce8\u610f\uff0c<code>iso</code>\u662f\u5355\u6001\u7684\u3002\u8fd8\u6ca1\u6709\u591a\u6001\u66ff\u4ee3\u54c1\uff08\u6682\u65f6\uff09\u3002</p>"},{"location":"reference-mc/#indexed-indexed","title":"<code>indexed</code> {#<code>indexed</code>}","text":"<p>\u7b7e\u540d\uff1a <code>indexed(): Iso&lt;S, _, [number, ElemType&lt;A&gt;][]&gt;</code></p> <p>\u53ea\u9002\u7528\u4e8e\u6570\u7ec4\u3002<code>ElemType&lt;A&gt;</code>\u662f\u6570\u7ec4\u7c7b\u578b<code>A</code>\u7684\u5143\u7d20\u7c7b\u578b\u3002</p> <p>\u4ece\u503c\u6570\u7ec4\u521b\u5efa\u4e00\u4e2a\u7d22\u5f15-\u503c\u5bf9\u6570\u7ec4\u7684\u540c\u6784\uff0c\u5373\u4ece<code>[a, b, ...]</code>\u5230<code>[[0, a], [1, b], ...]</code>\u3002</p> <p>\u5728\u5199\u65b9\u5411\u4e0a\uff0c\u5143\u7d20\u6309\u7d22\u5f15\u6392\u5e8f\uff0c\u91cd\u590d\u7684\u7d22\u5f15\u53ea\u4fdd\u7559\u6700\u540e\u4e00\u4e2a\u3002</p>"},{"location":"reference-mc/#lenses","title":"Lenses","text":"<p>Lenses\u5177\u6709\u7c7b\u578b<code>Lens&lt;S, T, A&gt;</code>\u3002\u5728\u4e0b\u9762\uff0c\u6211\u4eec\u4e3a\u4e86\u6e05\u6670\u8d77\u89c1\uff0c\u7701\u7565\u4e86<code>T</code>\u7684\u786e\u5207\u5b9a\u4e49\uff0c\u800c\u4f7f\u7528<code>_</code>\u4ee3\u66ff\u3002\u53c2\u89c1\u7c7b\u578b\u53c2\u6570\u4e86\u89e3\u7c7b\u578b\u53c2\u6570\u7684\u542b\u4e49\u3002</p>"},{"location":"reference-mc/#prop-prop","title":"<code>prop</code> {#<code>prop</code>}","text":"<p>\u7b7e\u540d\uff1a<code>prop&lt;K extends keyof A&gt;(key: K): Lens&lt;S, _, A[K]&gt;</code></p> <p>\u521b\u5efa\u4e00\u4e2a\u805a\u7126\u4e8e <code>A</code> \u7684\u5c5e\u6027 <code>K</code> \u7684\u955c\u5934\u3002</p> <p>\u6ce8\u610f\uff1a <code>prop()</code> \u4ec5\u9002\u7528\u4e8e\u5b57\u7b26\u4e32\u5c5e\u6027\uff0c\u5c3d\u7ba1 TypeScript \u7684\u7c7b\u578b\u7cfb\u7edf\u4e5f\u5141\u8bb8\u5728\u4f7f\u7528 <code>keyof</code> \u65f6\u4f7f\u7528\u6570\u7ec4\u7684\u6570\u5b57\u7d22\u5f15\u3002\u4f7f\u7528 <code>at</code> \u68f1\u955c\u805a\u7126\u4e8e\u7ed9\u5b9a\u7d22\u5f15\u7684\u6570\u7ec4\u5143\u7d20\u3002</p>"},{"location":"reference-mc/#path-path","title":"<code>path</code> {#<code>path</code>}","text":"<p>\u7b7e\u540d\uff1a<code>path&lt;K1, K2, ...&gt;(...keys: [K1, K2, ...]): Lens&lt;S, _, A[K1][K2]...&gt;</code></p> <p>\u4e00\u4e2a\u805a\u7126\u4e8e\u5c5e\u6027\u94fe\u7684\u5feb\u6377\u65b9\u5f0f\u3002</p> <pre><code>foo.path('a.b.c')\n</code></pre> <p>\u7b49\u540c\u4e8e</p> <pre><code>foo.path('a', 'b', 'c')\n</code></pre> <p>\u7b49\u540c\u4e8e</p> <pre><code>foo.prop('a').prop('b').prop('c')\n</code></pre>"},{"location":"reference-mc/#nth-nth","title":"<code>nth</code> {#<code>nth</code>}","text":"<p>\u7b7e\u540d\uff1a<code>nth&lt;N extends number&gt;(n: N): Lens&lt;S, _, Nth&lt;A, N&gt;&gt;</code></p> <p>\u4ec5\u9002\u7528\u4e8e\u957f\u5ea6\u81f3\u5c11\u4e3a <code>N + 1</code> \u7684\u5143\u7ec4\u3002</p> <p>\u521b\u5efa\u4e00\u4e2a\u805a\u7126\u4e8e <code>A</code> \u7684\u7d22\u5f15 <code>N</code> \u7684\u955c\u5934\u3002\u8fd9\u662f\u4e00\u4e2a\u955c\u5934\uff0c\u56e0\u4e3a <code>A</code> \u7684\u957f\u5ea6\u5728\u7c7b\u578b\u7ea7\u522b\u4e0a\u8fdb\u884c\u4e86\u68c0\u67e5\uff0c\u6240\u4ee5\u7d22\u5f15 <code>N</code> \u603b\u662f\u88ab\u5b9a\u4e49\u7684\u3002</p> <p>\u53c2\u89c1\u4e0b\u9762\u7684 <code>at</code> \uff0c\u8fd9\u662f\u4e00\u4e2a\u7c7b\u4f3c\u7684\u68f1\u955c\uff0c\u9002\u7528\u4e8e\u4efb\u610f\u957f\u5ea6\u7684\u6570\u7ec4\u3002</p>"},{"location":"reference-mc/#pick-pick","title":"<code>pick</code> {#<code>pick</code>}","text":"<p>\u7b7e\u540d\uff1a<code>pick&lt;K extends keyof A&gt;(keys: K[]): Lens&lt;S, _, Pick&lt;A, K&gt;&gt;</code></p> <p>\u521b\u5efa\u4e00\u4e2a\u805a\u7126\u4e8e\u5177\u6709\u7ed9\u5b9a\u5c5e\u6027\u7684 <code>A</code> \u7684\u5b50\u5bf9\u8c61\u7684\u955c\u5934\u3002\u901a\u8fc7\u591a\u6001\u7684 <code>.pick()</code> \u955c\u5934\u5199\u5165\u65f6\uff0c\u60a8\u53ef\u4ee5\u6dfb\u52a0\u6216\u5220\u9664\u5c5e\u6027\u3002</p> <p>\u793a\u4f8b\uff1a</p> <pre><code>const data = {\n    foo: 'something',\n    bar: 42,\n    baz: true,\n}\nconst lens = O.optic_&lt;typeof data&gt;().pick(['foo', 'bar'])\n\nO.get(lens)(data)\n// {\n//  foo: 'something',\n//  baz: true,\n// }\n\nO.set(lens)({ quux: null })(data)\n// {\n//   quux: null,\n//   baz: true,\n// }\n\n// \u540c\u4e00\u955c\u5934\u7684\u5355\u6001\u7248\u672c\nconst monoLens = O.optic&lt;typeof data&gt;().compose(lens)\n\nO.set(monoLens)({ quux: null })(data)\n// DisallowedTypeChange\n</code></pre>"},{"location":"reference-mc/#filter-filter","title":"<code>filter</code> {#<code>filter</code>}","text":"<p>\u7b7e\u540d\uff1a</p> <ul> <li><code>filter(pred: (item: ElemType&lt;A&gt;) =&gt; boolean): Lens&lt;S, _, A&gt;</code></li> <li><code>filter&lt;B&gt;(pred: (item: ElemType&lt;A&gt;) =&gt; item is B): Lens&lt;S, _, B[]&gt;</code></li> </ul> <p>\u4ec5\u9002\u7528\u4e8e\u6570\u7ec4\u3002<code>ElemType&lt;A&gt;</code> \u662f\u6570\u7ec4\u7c7b\u578b <code>A</code> \u7684\u5143\u7d20\u7c7b\u578b\u3002</p> <p>\u521b\u5efa\u4e00\u4e2a\u805a\u7126\u4e8e\u7531 <code>pred</code> \u5339\u914d\u7684\u5143\u7d20\u7684\u955c\u5934\u3002\u5982\u679c <code>pred</code> \u662f <code>B</code> \u7684\u7c7b\u578b\u4fdd\u62a4\uff0c\u5c06\u7126\u70b9\u7684\u7c7b\u578b\u7f29\u5c0f\u5230 <code>B[]</code>\u3002</p> <pre><code>const l = O.optic_&lt;number[]&gt;().filter((x) =&gt; x % 2 === 1)\n\n// \u5199\u5165\u76f8\u540c\u957f\u5ea6\u7684\u6570\u7ec4\u66ff\u6362\u5143\u7d20\nO.set(l)(['a', 'b', 'c'])([1, 2, 3, 5, 6])\n// ['a', 2, 'b', 'c', 6]\n\n// \u5199\u5165\u8f83\u77ed\u7684\u6570\u7ec4\u5220\u9664\u5143\u7d20\nO.set(l)(['a', 'b'])([1, 2, 3, 5, 6])\n// ['a', 2, 'b', 6]\n\n// \u5199\u5165\u8f83\u957f\u7684\u6570\u7ec4\u5c06\u5143\u7d20\u6dfb\u52a0\u5230\u672b\u5c3e\nO.set(l)(['a', 'b', 'c', 'd', 'e'])([1, 2, 3, 5, 6])\n// ['a', 2, 'b', 'c', 6, 'd', 'e']\n</code></pre> <p>\u5f53\u5199\u5165\u4e0d\u540c\u7c7b\u578b <code>U extends any[]</code> \u65f6\uff0c\u7ed3\u679c\u5c06\u5177\u6709\u7c7b\u578b <code>A | U</code>\uff0c\u5373 <code>(ElemType&lt;A&gt; | ElemType&lt;U&gt;)[]</code>\u3002</p>"},{"location":"reference-mc/#valueor-valueor","title":"<code>valueOr</code> {#<code>valueor</code>}","text":"<p>\u7b7e\u540d\uff1a<code>valueOr&lt;B&gt;(defaultValue: B): Lens&lt;S, _, Exclude&lt;A, undefined&gt; | B&gt;</code></p> <p>\u521b\u5efa\u4e00\u4e2a\u955c\u5934\uff0c\u5f53\u901a\u8fc7\u5b83\u8bfb\u53d6\u65f6\uff0c\u5982\u679c\u805a\u7126\u7684\u503c\u4e3a <code>undefined</code>\uff0c\u5219\u8fd4\u56de <code>defaultValue</code>\u3002\u5982\u679c\u7126\u70b9\u4e0d\u662f <code>undefined</code>\uff0c\u5219\u8fd4\u56de\u672a\u6539\u53d8\u7684\u7126\u70b9\u3002</p> <p>\u5728\u5199\u65b9\u5411\u4e0a\u5b8c\u5168\u591a\u6001\u3002</p>"},{"location":"reference-mc/#partsof-partsof","title":"<code>partsOf</code> {#<code>partsof</code>}","text":"<p>\u7b7e\u540d\uff1a</p> <ul> <li><code>partsOf(traversal: Traversal&lt;A, _, B&gt;): Lens&lt;S, _, B[]&gt;</code></li> <li><code>partsOf(makeTraversal: (o: Optic&lt;A&gt;) =&gt; Traversal&lt;A, _, B&gt;): Lens&lt;S, _, B[]&gt;</code></li> </ul> <p>\u4ece\u7ed9\u5b9a\u7684\u904d\u5386\u6216\u7531\u7ed9\u5b9a\u51fd\u6570\u8fd4\u56de\u7684\u904d\u5386\u521b\u5efa\u4e00\u4e2a\u955c\u5934\u3002\u901a\u8fc7\u8bfb\u53d6\u65f6\uff0c\u7ed3\u679c\u662f\u4e00\u4e2a\u5143\u7d20\u6570\u7ec4\uff0c\u5c31\u50cf\u7531 <code>collect</code> \u751f\u6210\u7684\u4e00\u6837\u3002\u901a\u8fc7\u5199\u5165\u65f6\uff0c\u904d\u5386\u7684\u7126\u70b9\u88ab\u66ff\u6362\u4e3a\u4ece\u5199\u5165\u6570\u7ec4\u4e2d\u7684\u503c\u3002\u5bf9\u4e8e\u591a\u6001\u5199\u5165\uff0c\u904d\u5386\u7684\u7126\u70b9\u83b7\u53d6\u5199\u5165\u6570\u7ec4\u5143\u7d20\u7684\u7c7b\u578b\u3002\u5982\u679c\u5199\u5165\u4e86\u8f83\u77ed\u6216\u8f83\u957f\u7684\u6570\u7ec4\uff0c\u5c06\u629b\u51fa\u9519\u8bef\u3002\u8fd9\u662f\u4e3a\u4e86\u786e\u4fdd\u6240\u6709\u7126\u70b9\u90fd\u88ab\u66ff\u6362\u5e76\u4e14\u7c7b\u578b\u662f\u6b63\u786e\u7684\u3002</p> <p>\u4f8b\u5982\uff0c\u8fd9\u5c06\u53cd\u8f6c\u5b57\u7b26\u4e32\u7684\u5355\u8bcd\uff1a</p> <pre><code>const lens = O.optic&lt;string&gt;().partsOf((o) =&gt; o.words())\nO.modify(lens)((words) =&gt; [...words].reverse())('this is a test')\n// 'test a is this'\n</code></pre> <p>\u8bf7\u6ce8\u610f\uff0c\u5c06 <code>partsOf</code> \u4e0e\u8bbe\u7f6e\u5668\uff08\u5982 <code>appendTo</code> \u6216 <code>prependTo</code>\uff09\u7ec4\u5408\uff0c\u6216\u901a\u8fc7 <code>partsOf</code> \u5220\u9664\u5143\u7d20\u5c06\u65e0\u6cd5\u5de5\u4f5c\uff0c\u56e0\u4e3a\u8bbe\u7f6e\u5668\u6dfb\u52a0\u7684\u989d\u5916\u5143\u7d20\u6216\u5220\u9664\u7684\u5143\u7d20\u5c06\u5bfc\u81f4 <code>partsOf</code> \u629b\u51fa\u3002</p>"},{"location":"reference-mc/#reread-reread","title":"<code>reread</code> {#<code>reread</code>}","text":""},{"location":"reference-mc/#rewrite-rewrite","title":"<code>rewrite</code> {#<code>rewrite</code>}","text":"<p>\u7b7e\u540d\uff1a</p> <ul> <li><code>reread(fn: (value: A) =&gt; A): Lens&lt;S, _, A&gt;</code></li> <li><code>rewrite(fn: (value: A) =&gt; A): Lens&lt;S, _, A&gt;</code></li> </ul> <p>\u521b\u5efa\u4e00\u4e2a\u955c\u5934\uff0c\u53ef\u4ee5\u5728\u8bfb\u53d6\u65b9\u5411\uff08<code>reread()</code>\uff09\u6216\u5199\u5165\u65b9\u5411\uff08<code>rewrite()</code>\uff09\u4fee\u6539\u503c\u3002\u8fd9\u5728\u67d0\u4e9b\u60c5\u51b5\u4e0b\u786e\u4fdd\u6570\u636e\u7ed3\u6784\u4e0d\u53d8\u6027\u5f88\u6709\u7528\u3002</p> <p>\u8bf7\u6ce8\u610f\uff0c<code>reread</code> \u548c <code>rewrite</code> \u90fd\u662f\u5355\u6001\u7684\u3002</p>"},{"location":"reference-mc/#lens-lens","title":"<code>lens</code> {#<code>lens</code>}","text":"<p>\u7b7e\u540d\uff1a <code>lens&lt;U&gt;(view: (a: A) =&gt; U, update: (a: A, u: U) =&gt; A): Lens&lt;S, _, U&gt;</code></p> <p>\u4ece\u51fd\u6570 <code>view</code> \u548c <code>update</code> \u521b\u5efa\u4e00\u4e2a\u955c\u5934\u3002<code>view</code> \u63a5\u53d7\u5f53\u524d\u7126\u70b9\u5e76\u8fd4\u56de\u4e00\u4e2a\u65b0\u7126\u70b9\u3002<code>update</code> \u63a5\u53d7\u539f\u59cb\u7126\u70b9\u548c\u4e00\u4e2a\u503c\uff0c\u5e76\u4f7f\u7528\u8be5\u503c\u66f4\u65b0\u539f\u59cb\u7126\u70b9\u3002</p> <p>\u8bf7\u6ce8\u610f\uff0c<code>lens</code> \u662f\u5355\u6001\u7684\u3002\u8fd8\u6ca1\u6709\u591a\u6001\u66ff\u4ee3\u54c1\uff08\u6682\u65f6\uff09\u3002</p>"},{"location":"reference-mc/#prisms","title":"Prisms","text":"<p>Prisms \u7684\u7c7b\u578b\u4e3a <code>Prism&lt;S, T, A&gt;</code>\u3002\u5728\u4e0b\u9762\uff0c\u6211\u4eec\u4e3a\u4e86\u6e05\u6670\u8d77\u89c1\u7701\u7565\u4e86 <code>T</code> \u7684\u786e\u5207\u5b9a\u4e49\uff0c\u5e76\u4f7f\u7528 <code>_</code> \u4ee3\u66ff\u3002\u8bf7\u53c2\u9605 \u7c7b\u578b\u53c2\u6570 \u4e86\u89e3\u7c7b\u578b\u53c2\u6570\u7684\u542b\u4e49\u3002</p>"},{"location":"reference-mc/#optional-optional","title":"<code>optional</code> {#<code>optional</code>}","text":"<p>\u7b7e\u540d\uff1a<code>optional(): Prism&lt;S, _, Exclude&lt;A, undefined&gt;&gt;</code></p> <p>\u521b\u5efa\u4e00\u4e2a\u68f1\u955c\uff0c\u805a\u7126\u4e8e <code>A</code> \u7684\u975e <code>undefined</code> \u5b50\u7c7b\u578b\u3002</p>"},{"location":"reference-mc/#guard-guard","title":"<code>guard</code> {#<code>guard</code>}","text":"<p>\u7b7e\u540d\uff1a<code>guard&lt;U extends A&gt;(g: (a: A) =&gt; a is U): Prism&lt;S, _, U&gt;</code></p> <p>\u521b\u5efa\u4e00\u4e2a\u68f1\u955c\uff0c\u805a\u7126\u4e8e\u5339\u914d\u7c7b\u578b\u4fdd\u62a4 <code>g</code> \u7684 <code>A</code> \u7684\u5b50\u7c7b\u578b <code>U</code>\u3002</p> <p>\u8bf7\u6ce8\u610f\uff0c<code>guard()</code> \u662f\u5355\u6001\u7684\u3002\u5982\u679c\u4f60\u60f3\u8981\u4e00\u4e2a\u591a\u6001\u4fdd\u62a4\uff0c\u8bf7\u4f7f\u7528 <code>guard_</code>\u3002</p>"},{"location":"reference-mc/#guard_-guard_","title":"<code>guard_</code> {#<code>guard_</code>}","text":"<p>\u7b7e\u540d\uff1a <code>guard_&lt;F extends HKT&gt;(): &lt;U extends A&gt;(g: (a: A) =&gt; a is U) =&gt; Prism&lt;S, T \u00b7 F, U&gt;</code></p> <p>\u521b\u5efa\u4e00\u4e2a\u68f1\u955c\uff0c\u805a\u7126\u4e8e\u5339\u914d\u7c7b\u578b\u4fdd\u62a4 <code>g</code> \u7684 <code>A</code> \u7684\u5b50\u7c7b\u578b\u3002\u5199\u5165\u65f6\uff0c\u4f7f\u7528\u66f4\u9ad8\u7ea7\u522b\u7684\u7c7b\u578b <code>F</code> \u6784\u9020\u8f93\u51fa\u7c7b\u578b\u3002</p>"},{"location":"reference-mc/#at-at","title":"<code>at</code> {#<code>at</code>}","text":"<p>\u7b7e\u540d\uff1a<code>at(i: number): RemovablePrism&lt;S, _, ElemType&lt;A&gt;&gt;</code></p> <p>\u4ec5\u9002\u7528\u4e8e\u6570\u7ec4\u548c\u5b57\u7b26\u4e32\u3002\u53ef\u79fb\u9664\u7684\u3002<code>ElemType&lt;A&gt;</code> \u662f\u6570\u7ec4\u7c7b\u578b <code>A</code> \u7684\u5143\u7d20\u7c7b\u578b\u3002</p> <p>\u521b\u5efa\u4e00\u4e2a\u68f1\u955c\uff0c\u805a\u7126\u4e8e\u6570\u7ec4 <code>A</code> \u7684\u5143\u7d20\u7c7b\u578b\uff0c\u6216\u8005\u5982\u679c <code>A</code> \u662f <code>string</code>\uff0c\u5219\u805a\u7126\u4e8e\u957f\u5ea6\u4e3a 1 \u7684\u5b50\u5b57\u7b26\u4e32\u3002</p> <p>\u5f53\u5c06\u4e0d\u540c\u7c7b\u578b <code>B</code> \u7684\u5143\u7d20\u5199\u5165\u6570\u7ec4\u65f6\uff0c\u7ed3\u679c\u6570\u7ec4\u5c06\u5177\u6709\u7c7b\u578b <code>Array&lt;A | B&gt;</code>\u3002</p> <p>\u5199\u5165\u5b57\u7b26\u4e32\u65f6\uff0c\u53ea\u80fd\u5199\u5165\u5b57\u7b26\u4e32\u3002\u5199\u5165\u7684\u5b57\u7b26\u4e32\u957f\u5ea6\u53ef\u4ee5\u4e0d\u662f 1\u3002</p>"},{"location":"reference-mc/#head-head","title":"<code>head</code> {#<code>head</code>}","text":"<p>\u7b7e\u540d\uff1a<code>head(): Prism&lt;S, _, ElemType&lt;A&gt;&gt;</code></p> <p>\u76f8\u5f53\u4e8e <code>at(0)</code>\u3002</p>"},{"location":"reference-mc/#index-index","title":"<code>index</code> {#<code>index</code>}","text":"<p>\u7b7e\u540d\uff1a<code>index(i: number): RemovablePrism&lt;S, _, ElemType&lt;A&gt;&gt;</code></p> <p>\u5df2\u5f03\u7528\u3002\u522b\u540d\u4e3a <code>at</code>\u3002</p>"},{"location":"reference-mc/#find-find","title":"<code>find</code> {#<code>find</code>}","text":"<p>\u7b7e\u540d\uff1a <code>find(p: (e: ElemType&lt;A&gt;) =&gt; boolean): RemovablePrism&lt;S, _, ElemType&lt;A&gt;&gt;</code></p> <p>\u4ec5\u9002\u7528\u4e8e\u6570\u7ec4\u7c7b\u578b\u3002\u53ef\u79fb\u9664\u3002<code>ElemType&lt;A&gt;</code> \u662f\u6570\u7ec4\u7c7b\u578b <code>A</code> \u7684\u5143\u7d20\u7c7b\u578b\u3002</p> <p>\u7c7b\u4f3c\u4e8e <code>at</code>\uff0c\u4f46\u662f\u8981\u805a\u7126\u7684\u7d22\u5f15\u662f\u901a\u8fc7\u627e\u5230\u7b2c\u4e00\u4e2a\u5339\u914d\u7ed9\u5b9a\u8c13\u8bcd\u7684\u5143\u7d20\u6765\u786e\u5b9a\u7684\u3002</p> <p>\u5f53\u901a\u8fc7\u6b64\u5149\u5b66\u5143\u7d20\u5199\u5165\u4e0d\u540c\u7c7b\u578b <code>B</code> \u7684\u5143\u7d20\u65f6\uff0c\u7ed3\u679c\u6570\u7ec4\u5c06\u5177\u6709\u7c7b\u578b <code>Array&lt;A | B&gt;</code>\u3002</p>"},{"location":"reference-mc/#when-when","title":"<code>when</code> {#<code>when</code>}","text":"<p>\u7b7e\u540d\uff1a<code>when(f: (a: A) =&gt; boolean): Prism&lt;S, _, A&gt;</code></p> <p>\u521b\u5efa\u4e00\u4e2a\u68f1\u955c\uff0c\u5982\u679c\u7126\u70b9\u4e0d\u5339\u914d\u7ed9\u5b9a\u7684\u8c13\u8bcd\uff0c\u5c31\u8df3\u8fc7\u7126\u70b9\u3002\u7279\u522b\u9002\u7528\u4e8e\u8fc7\u6ee4\u904d\u5386\u7684\u7126\u70b9\u3002</p> <p>\u5f53\u901a\u8fc7\u6b64\u5149\u5b66\u5143\u7d20\u5199\u5165\u4e0d\u540c\u7c7b\u578b <code>B</code> \u7684\u5143\u7d20\u65f6\uff0c\u7ed3\u679c\u503c\u5c06\u5177\u6709\u7c7b\u578b <code>A | B</code>\u3002</p>"},{"location":"reference-mc/#traversals","title":"Traversals","text":"<p>\u904d\u5386\u7684\u7c7b\u578b\u4e3a <code>Traversal&lt;S, T, A&gt;</code>\u3002\u5728\u4e0b\u9762\uff0c\u6211\u4eec\u4e3a\u4e86\u6e05\u6670\u8d77\u89c1\u7701\u7565\u4e86 <code>T</code> \u7684\u786e\u5207\u5b9a\u4e49\uff0c\u5e76\u4f7f\u7528 <code>_</code> \u4ee3\u66ff\u3002\u8bf7\u53c2\u9605 \u7c7b\u578b\u53c2\u6570 \u4e86\u89e3\u7c7b\u578b\u53c2\u6570\u7684\u542b\u4e49\u3002</p>"},{"location":"reference-mc/#elems-elems","title":"<code>elems</code> {#<code>elems</code>}","text":"<p>\u7b7e\u540d\uff1a<code>elems(): Traversal&lt;S, _, ElemType&lt;A&gt;&gt;</code></p> <p>\u4ec5\u9002\u7528\u4e8e\u6570\u7ec4\u7c7b\u578b\u3002<code>ElemType&lt;A&gt;</code> \u662f\u6570\u7ec4\u7c7b\u578b <code>A</code> \u7684\u5143\u7d20\u7c7b\u578b\u3002</p> <p>\u521b\u5efa\u4e00\u4e2a\u904d\u5386\uff0c\u805a\u7126\u4e8e\u6570\u7ec4\u7684\u6240\u6709\u5143\u7d20\u3002</p>"},{"location":"reference-mc/#getters","title":"Getters","text":"<p>\u83b7\u53d6\u5668\u662f\u5177\u6709\u5355\u4e00\u7126\u70b9\u7684\u53ea\u8bfb\u5149\u5b66\u5143\u7d20\u3002\u4f60\u53ef\u4ee5\u5c06\u5b83\u4eec\u89c6\u4e3a\u5355\u5411\u540c\u6784\u6216\u53ea\u8bfb\u955c\u5934\u3002</p> <p>\u83b7\u53d6\u5668\u7684\u7c7b\u578b\u4e3a <code>Getter&lt;S, A&gt;</code>\u3002\u8bf7\u53c2\u9605 \u7c7b\u578b\u53c2\u6570 \u4e86\u89e3\u7c7b\u578b\u53c2\u6570\u7684\u542b\u4e49\u3002</p>"},{"location":"reference-mc/#to-to","title":"<code>to</code> {#<code>to</code>}","text":"<p>\u7b7e\u540d\uff1a<code>to&lt;B&gt;(f: (a: A) =&gt; B): Getter&lt;S, B&gt;</code></p> <p>\u521b\u5efa\u4e00\u4e2a\u83b7\u53d6\u5668\uff0c\u5c06\u51fd\u6570 <code>f</code> \u5e94\u7528\u4e8e\u5176\u7126\u70b9\u3002</p>"},{"location":"reference-mc/#setters","title":"Setters","text":"<p>\u8bbe\u7f6e\u5668\u7684\u7c7b\u578b\u4e3a <code>Setter&lt;S, T, A&gt;</code>\u3002\u5728\u4e0b\u9762\uff0c\u6211\u4eec\u4e3a\u4e86\u6e05\u6670\u8d77\u89c1\u7701\u7565\u4e86 <code>T</code> \u7684\u786e\u5207\u5b9a\u4e49\uff0c\u5e76\u4f7f\u7528 <code>_</code> \u4ee3\u66ff\u3002\u8bf7\u53c2\u9605 \u7c7b\u578b\u53c2\u6570 \u4e86\u89e3\u7c7b\u578b\u53c2\u6570\u7684\u542b\u4e49\u3002</p>"},{"location":"reference-mc/#prependto-prependto","title":"<code>prependTo</code> {#<code>prependto</code>}","text":""},{"location":"reference-mc/#appendto-appendto","title":"<code>appendTo</code> {#<code>appendto</code>}","text":"<p>\u7b7e\u540d\uff1a</p> <ul> <li><code>prependTo(): Setter&lt;S, _, ElemType&lt;A&gt;&gt;</code></li> <li><code>appendTo(): Setter&lt;S, _, ElemType&lt;A&gt;&gt;</code></li> </ul> <p>\u4ec5\u9002\u7528\u4e8e\u6570\u7ec4\u3002<code>ElemType&lt;A&gt;</code> \u662f\u6570\u7ec4\u7c7b\u578b <code>A</code> \u7684\u5143\u7d20\u7c7b\u578b\u3002</p> <p>\u521b\u5efa\u4e00\u4e2a\u8bbe\u7f6e\u5668\uff0c\u805a\u7126\u4e8e\u7126\u70b9\u6570\u7ec4\u7684 \u7b2c\u4e00\u4e2a\u5143\u7d20\u4e4b\u524d \u6216 \u6700\u540e\u4e00\u4e2a\u5143\u7d20\u4e4b\u540e \u7684\u90e8\u5206\u3002\u5199\u5165\u65f6\uff0c\u5c06\u503c\u524d\u7f6e\u6216\u8ffd\u52a0\u5230\u6570\u7ec4\u3002</p> <p>\u5f53\u5199\u5165\u4e0d\u540c\u7c7b\u578b <code>B</code> \u7684\u5143\u7d20\u65f6\uff0c\u7ed3\u679c\u6570\u7ec4\u5c06\u5177\u6709\u7c7b\u578b <code>Array&lt;A | B&gt;</code>\u3002</p>"},{"location":"reference-mc/#composing","title":"Composing","text":""},{"location":"reference-mc/#compose-compose_1","title":"<code>compose</code> {#<code>compose</code>}","text":"<p>\u7b7e\u540d\uff1a<code>compose&lt;B&gt;(other: Optic&lt;A, _, B&gt;): Optic&lt;S, _, B&gt;</code></p>"},{"location":"reference-mc/#strings","title":"Strings","text":"<p>\u4ee5\u4e0b\u5149\u5b66\u5143\u7d20\u4ec5\u9002\u7528\u4e8e\u5b57\u7b26\u4e32\u3002</p>"},{"location":"reference-mc/#chars-chars","title":"<code>chars</code> {#<code>chars</code>}","text":"<p>\u7b7e\u540d\uff1a<code>chars(): Traversal&lt;S, _, string&gt;</code></p> <p>\u521b\u5efa\u4e00\u4e2a\u904d\u5386\uff0c\u805a\u7126\u4e8e\u5f53\u524d\u5b57\u7b26\u4e32\u7126\u70b9\u7684\u6240\u6709\u5b57\u7b26\u3002</p> <p>\u5199\u5165\u65f6\uff0c\u53ef\u4ee5\u901a\u8fc7\u5199\u5165\u7a7a\u5b57\u7b26\u4e32\u6765\u5220\u9664\u5b57\u7b26\uff0c\u6216\u8005\u66f4\u6539\u4e3a\u66f4\u957f\u7684\u5b57\u7b26\u4e32\u3002</p>"},{"location":"reference-mc/#words-words","title":"<code>words</code> {#<code>words</code>}","text":"<p>\u7b7e\u540d\uff1a<code>words(): Traversal&lt;S, _, string&gt;</code></p> <p>\u521b\u5efa\u4e00\u4e2a\u904d\u5386\uff0c\u805a\u7126\u4e8e\u5f53\u524d\u5b57\u7b26\u4e32\u7126\u70b9\u7684\u6240\u6709\u5355\u8bcd\u3002\u5355\u8bcd\u662f\u7531\u7a7a\u683c\u5206\u9694\u7684\u5b50\u5b57\u7b26\u4e32\u3002</p> <p>\u5199\u5165\u65f6\uff0c\u53ef\u4ee5\u901a\u8fc7\u5199\u5165\u7a7a\u5b57\u7b26\u4e32\u6765\u5220\u9664\u5355\u8bcd\uff0c\u6216\u8005\u66f4\u6539\u4e3a\u66f4\u957f\u6216\u66f4\u77ed\u7684\u5b57\u7b26\u4e32\u3002</p>"},{"location":"reference-standalone/","title":"\u72ec\u7acbAPI","text":"<p>\u6ce8\u610f</p> <pre><code>\u81ea optics-ts v2.2.0 \u8d77\uff0c\u5149\u5b66\u6709\u4e24\u79cd\u8bed\u6cd5\uff1a**\u65b9\u6cd5\u94fe**\u548c**\u72ec\u7acb\u5149\u5b66**\u3002\u6709\u5173\u5b83\u4eec\u4e4b\u95f4\u7684\u5dee\u5f02\u7684\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605[\u4e24\u79cd\u8bed\u6cd5](two-syntaxes.md)\u3002\n</code></pre> <p>\u5b9e\u9a8c\u6027</p> <pre><code>\u6b64\u6a21\u5757\u662f\u5b9e\u9a8c\u6027\u7684\uff0c\u53ef\u80fd\u4f1a\u63a5\u6536\u5230\u5411\u540e\u4e0d\u517c\u5bb9\u7684\u66f4\u6539\uff0c\u800c\u4e0d\u4f1a\u6709\u76f8\u5e94\u7684 semver bump\u3002\n</code></pre> <p>\u4ee5\u4e0b\u6240\u6709\u5185\u5bb9\u90fd\u5047\u5b9a\u6709\u4ee5\u4e0b\u5bfc\u5165\uff1a</p> <pre><code>import * as O from 'optics-ts/standalone'\n</code></pre>"},{"location":"reference-standalone/#typescript-types","title":"TypeScript \u7c7b\u578b","text":"<p>\u901a\u5e38\uff0c\u5149\u5b66\u7684 TypeScript \u7c7b\u578b\u770b\u8d77\u6765\u50cf <code>Optic&lt;C, A, T, R&gt;</code>\u3002</p> <ul> <li> <p><code>C</code> \u662f\u5149\u5b66\u7c7b\u578b\u4f5c\u4e3a\u5b57\u7b26\u4e32\uff0c\u4f8b\u5982 <code>'Lens'</code> \u6216 <code>'Prism'</code></p> </li> <li> <p><code>A</code> \u548c <code>T</code> \u7f16\u7801\u5149\u5b66\u7684\u8bfb\u5199\u65b9\u5411\u8f6c\u6362\u4e3a     \"\u66f4\u9ad8\u7ea7\u522b\u7684\" \u7c7b\u578b</p> </li> <li> <p><code>R</code> \u662f <code>true</code> \u5982\u679c\u5149\u5b66\u662f\u53ef\u79fb\u9664\u7684\uff0c\u5426\u5219\u662f <code>undefined</code>\u3002</p> </li> </ul> <p>\u5728\u4e0b\u9762\uff0c\u6211\u4eec\u4e3a\u4e86\u6e05\u6670\u8d77\u89c1\uff0c\u7701\u7565\u4e86\u786e\u5207\u7684\u7c7b\u578b\u7b7e\u540d\uff0c\u800c\u4f7f\u7528\u4e86\u4e00\u79cd\u624b\u6447\u5f0f\u7684\u4f2a\u8bed\u6cd5\u3002\u5149\u5b66\u63cf\u8ff0\u8bd5\u56fe\u660e\u786e\u5149\u5b66\u548c\u51fd\u6570\u7684\u64cd\u4f5c\u65b9\u5f0f\u3002</p> <p>\u611f\u5174\u8da3\u7684\u8bfb\u8005\u53ef\u4ee5\u53c2\u8003 hkt.ts \u6765\u770b\u770b \u66f4\u9ad8\u7ea7\u522b\u7684\u7c7b\u578b/\u90e8\u5206\u5e94\u7528\u7c7b\u578b\u8fd0\u7b97\u7b26\u5b9e\u9645\u4e0a\u662f\u5982\u4f55\u5b9e\u73b0\u7684\u3002</p>"},{"location":"reference-standalone/#operations","title":"\u64cd\u4f5c","text":"<p>\u8fd9\u4e9b\u51fd\u6570\u672c\u8eab\u4e0d\u662f\u5149\u5b66\uff0c\u800c\u662f\u5728\u5149\u5b66\u548c\u6570\u636e\u4e0a\u64cd\u4f5c\u3002</p>"},{"location":"reference-standalone/#compose-compose","title":"<code>compose</code> {#<code>compose</code>}","text":"<p><code>compose :: (optic, ...optics) =&gt; Optic</code></p> <p>\u7ec4\u5408\u5149\u5b66\u4ee5\u521b\u5efa\u66f4\u590d\u6742\u7684\u5149\u5b66\u3002\u4f7f\u7528\u5b57\u7b26\u4e32\u4f5c\u4e3a\u5149\u5b66\u662fprop\u7684\u7b80\u5199\u3002</p> <p>\u793a\u4f8b\uff1a</p> <pre><code>const fooBar = O.compose('foo', O.optional, 'bar')\n\nO.preview(fooBar, { foo: undefined })\n// undefined\n\nO.preview(fooBar, { foo: { bar: 5 } })\n// 5\n</code></pre>"},{"location":"reference-standalone/#get-get","title":"<code>get</code> {#<code>get</code>}","text":"<p><code>get :: (optic, source) =&gt; value</code> <code>get :: (optic) =&gt; (source) =&gt; value</code></p> <p>\u901a\u8fc7 <code>Equivalence</code>\u3001<code>Iso</code>\u3001<code>Lens</code> \u6216 <code>Getter</code> \u8bfb\u53d6\u503c\u3002</p> <p>\u793a\u4f8b\uff1a</p> <pre><code>O.get(O.pick('foo', 'baz'), { foo: 1, bar: 2, baz: 3 })\n// { foo: 1, baz: 3 }\n</code></pre>"},{"location":"reference-standalone/#preview-preview","title":"<code>preview</code> {#<code>preview</code>}","text":"<p><code>preview :: (optic, source) =&gt; value | undefined</code> <code>preview :: (optic) =&gt; (source) =&gt; value | undefined</code></p> <p>\u901a\u8fc7 <code>Prism</code>\u3001<code>Traversal</code>\u3001<code>AffineFold</code> \u6216 <code>Fold</code> \u8bfb\u53d6\u503c\u3002\u5bf9\u4e8e <code>Prism</code> \u548c <code>AffineFold</code>\uff0c\u5982\u679c\u5149\u5b66\u4e0d\u5339\u914d\uff08\u6ca1\u6709\u7126\u70b9\uff09\uff0c\u5219\u8fd4\u56de <code>undefined</code>\u3002\u5bf9\u4e8e <code>Traversal</code> \u548c <code>Fold</code>\uff0c\u8fd4\u56de\u7b2c\u4e00\u4e2a\u7126\u70b9\u7684\u503c\uff0c\u6216\u8005\u5982\u679c\u6ca1\u6709\u7126\u70b9\uff0c\u5219\u8fd4\u56de <code>undefined</code>\u3002</p> <p>\u793a\u4f8b\uff1a</p> <pre><code>O.preview(O.optional, 1)\n// 1\n\nO.preview(O.elems, [])\n// undefined\n</code></pre>"},{"location":"reference-standalone/#collect-collect","title":"<code>collect</code> {#<code>collect</code>}","text":"<p><code>collect :: (optic, source) =&gt; value[]</code> <code>collect :: (optic) =&gt; (source) =&gt; value[]</code></p> <p>\u901a\u8fc7 <code>Prism</code>\u3001<code>Traversal</code>\u3001<code>AffineFold</code> \u6216 <code>Fold</code> \u8bfb\u53d6\u6240\u6709\u7126\u70b9\u503c\u3002 \u5bf9\u4e8e <code>Prism</code> \u548c <code>AffineFold</code>\uff0c\u8fd4\u56de\u503c\u662f\u4e00\u4e2a\u5305\u542b 0 \u6216 1 \u4e2a\u5143\u7d20\u7684\u6570\u7ec4\u3002 \u5bf9\u4e8e <code>Traversal</code> \u548c <code>Fold</code>\uff0c\u8fd4\u56de\u503c\u662f\u4e00\u4e2a\u5305\u542b\u96f6\u4e2a\u6216\u591a\u4e2a\u5143\u7d20\u7684\u6570\u7ec4\u3002</p> <p>\u793a\u4f8b\uff1a</p> <pre><code>O.collect(O.optional, 1)\n// [1]\n\nO.collect(O.elems, [])\n// []\n</code></pre>"},{"location":"reference-standalone/#modify-modify","title":"<code>modify</code> {#<code>modify</code>}","text":"<p><code>modify :: (optic, fn, source) =&gt; value</code> <code>modify :: (optic) =&gt; (fn, source) =&gt; value</code> <code>modify :: (optic) =&gt; (fn) =&gt; (source) =&gt; value</code></p> <p>\u901a\u8fc7 <code>Equivalence</code>\u3001<code>Iso</code>\u3001<code>Lens</code>\u3001<code>Prism</code> \u6216 <code>Traversal</code> \u4fee\u6539\u7126\u70b9\u503c\u3002\u8fd4\u56de <code>source</code> \u7684\u66f4\u65b0\u526f\u672c\uff0c\u6240\u6709\u7126\u70b9\u90fd\u901a\u8fc7\u6620\u5c04\u5b83\u4eec\u901a\u8fc7\u51fd\u6570 <code>fn</code> \u8fdb\u884c\u4fee\u6539\u3002</p> <p>\u793a\u4f8b\uff1a</p> <pre><code>O.modify(O.prop('foo'), (value) =&gt; value.length, { foo: 'bar' })\n// { foo: 3 }\n</code></pre>"},{"location":"reference-standalone/#set-set","title":"<code>set</code> {#<code>set</code>}","text":"<p>\u7b7e\u540d\uff1a</p> <p><code>set :: (optic, newValue, source) =&gt; value</code> <code>set :: (optic) =&gt; (newValue, source) =&gt; value</code> <code>set :: (optic) =&gt; (newValue) =&gt; (source) =&gt; value</code></p> <p>\u901a\u8fc7 <code>Equivalence</code>\u3001<code>Iso</code>\u3001<code>Lens</code>\u3001<code>Prism</code> \u6216 <code>Traversal</code> \u5199\u5165\u5e38\u91cf\u503c\u3002\u8fd4\u56de <code>source</code> \u7684\u66f4\u65b0\u526f\u672c\uff0c\u6240\u6709\u7126\u70b9\u90fd\u88ab <code>newValue</code> \u66ff\u6362\u3002</p> <p>\u793a\u4f8b\uff1a</p> <pre><code>O.set(O.prop('foo'), null, { foo: 'bar' })\n// { foo: null }\n</code></pre>"},{"location":"reference-standalone/#remove-remove","title":"<code>remove</code> {#<code>remove</code>}","text":"<p><code>remove :: (optic, source) =&gt; value</code> <code>remove :: (optic) =&gt; (source) =&gt; value</code></p> <p>\u4ece\u5176\u5305\u542b\u7684\u5bb9\u5668\u4e2d\u5220\u9664 <code>RemovablePrism</code> \u7684\u7126\u70b9\u3002</p> <p>\u793a\u4f8b\uff1a</p> <pre><code>O.remove(O.at(1), [1, 2, 3])\n// [1, 3]\n</code></pre>"},{"location":"reference-standalone/#isomorphisms","title":"\u540c\u6784","text":""},{"location":"reference-standalone/#iso-iso","title":"<code>iso</code> {#<code>iso</code>}","text":"<p><code>iso :: (there: (v) =&gt; u, back: (u) =&gt; v) =&gt; Iso</code></p> <p>\u4ece\u51fd\u6570 <code>there</code> \u548c <code>back</code> \u521b\u5efa\u4e00\u4e2a\u540c\u6784\u3002<code>there</code> \u63a5\u53d7\u7126\u70b9\u5e76\u5c06\u5176\u8f6c\u6362\u4e3a\u53e6\u4e00\u4e2a\u503c\u3002<code>back</code> \u662f <code>there</code> \u7684\u9006\u51fd\u6570\u3002</p> <p>\u6ce8\u610f\uff0c<code>iso</code> \u662f\u5355\u6001\u7684\uff0c\u5373\u4f60\u4e0d\u80fd\u5728\u5199\u5165\u65f6\u66f4\u6539\u503c\u7c7b\u578b\u3002\u8fd8\u6ca1\u6709\u591a\u6001\u7684\u66ff\u4ee3\u54c1\uff08\u5c1a\u672a\uff09\u3002</p> <p>\u793a\u4f8b\uff1a</p> <pre><code>const sep = O.iso(\n    (value: string) =&gt; value.split(','),\n    (arr: string[]) =&gt; arr.join(',')\n)\n\nO.get(sep, 'foo,bar,baz')\n// ['foo', 'bar', 'baz']\n\nO.modify(sep, (arr) =&gt; [...arr].reverse(), 'foo,bar,baz')\n// 'baz,bar,foo'\n</code></pre>"},{"location":"reference-standalone/#indexed-indexed","title":"<code>indexed</code> {#<code>indexed</code>}","text":"<p><code>indexed :: Iso</code></p> <p>\u53ea\u9002\u7528\u4e8e\u6570\u7ec4\u3002</p> <p><code>indexed</code> \u662f\u4ece\u503c\u6570\u7ec4\u5230\u7d22\u5f15-\u503c\u5bf9\u6570\u7ec4\u7684\u540c\u6784\uff0c\u5373\u4ece <code>[a, b, ...]</code> \u5230 <code>[[0, a], [1, b], ...]</code>\u3002</p> <p>\u5728\u5199\u5165\u65b9\u5411\uff0c\u5143\u7d20\u6309\u7d22\u5f15\u6392\u5e8f\uff0c\u53ea\u4fdd\u7559\u91cd\u590d\u7d22\u5f15\u7684\u6700\u540e\u4e00\u4e2a\u3002</p> <p>\u793a\u4f8b\uff1a</p> <pre><code>O.get(O.indexed, ['a', 'b', 'c'])\n// [[0, 'a'], [1, 'b'], [2, 'c']] \n\nO.set(O.compose(O.indexed, O.at(1), O.nth(0)), 3, ['a', 'b', 'c'])\n// ['a', 'c', 'b']\n</code></pre>"},{"location":"reference-standalone/#lenses","title":"\u900f\u955c","text":""},{"location":"reference-standalone/#prop-prop","title":"<code>prop</code> {#<code>prop</code>}","text":"<p><code>prop :: (key) =&gt; Lens</code></p> <p>\u521b\u5efa\u4e00\u4e2a\u805a\u7126\u4e8e\u5bf9\u8c61\u5c5e\u6027 <code>key</code> \u7684\u900f\u955c\u3002</p> <p>\u4f60\u4e5f\u53ef\u4ee5\u7b80\u5355\u5730\u5c06\u5b57\u7b26\u4e32\u4f20\u9012\u7ed9 <code>compose</code>\uff0c\u800c\u4e0d\u662f\u4f7f\u7528 <code>prop</code>\u3002</p> <p>\u793a\u4f8b\uff1a</p> <pre><code>O.set(O.prop('foo'), 42, { foo: null })\n// { foo: 42 }\n</code></pre> <p>\u8bf7\u53c2\u9605 <code>atKey</code> \u4e86\u89e3\u5728\u8bb0\u5f55\u4e0a\u5de5\u4f5c\u7684\u7c7b\u4f3c\u68f1\u955c\u3002</p>"},{"location":"reference-standalone/#nth-nth","title":"<code>nth</code> {#<code>nth</code>}","text":"<p><code>nth :: (n) =&gt; Lens</code></p> <p>\u53ea\u9002\u7528\u4e8e\u957f\u5ea6\u81f3\u5c11\u4e3a <code>n + 1</code> \u7684 \u5143\u7ec4\u3002</p> <p>\u521b\u5efa\u4e00\u4e2a\u805a\u7126\u4e8e\u5143\u7ec4\u7d22\u5f15 <code>n</code> \u7684\u900f\u955c\u3002\u8fd9\u662f\u4e00\u4e2a\u900f\u955c\uff0c\u56e0\u4e3a\u7126\u70b9\u7684\u957f\u5ea6\u5728\u7c7b\u578b\u7ea7\u522b\u4e0a\u8fdb\u884c\u68c0\u67e5\uff0c\u6240\u4ee5\u7d22\u5f15 <code>n</code> \u603b\u662f\u5df2\u5b9a\u4e49\u7684\u3002</p> <p>\u8bf7\u53c2\u9605 <code>at</code> \u4e86\u89e3\u5728\u6570\u7ec4\u4e0a\u5de5\u4f5c\u7684\u7c7b\u4f3c\u68f1\u955c\u3002</p>"},{"location":"reference-standalone/#pick-pick","title":"<code>pick</code> {#<code>pick</code>}","text":"<p><code>pick :: (...keys) =&gt; Lens</code></p> <p>\u521b\u5efa\u4e00\u4e2a\u4ece\u5bf9\u8c61\u4e2d\u9009\u62e9\u7ed9\u5b9a\u5c5e\u6027\u7684\u900f\u955c\u3002\u901a\u8fc7\u900f\u955c\u5199\u5165\u65f6\uff0c\u4f60\u53ef\u4ee5\u6dfb\u52a0\u6216\u5220\u9664\u5c5e\u6027\u3002</p> <p>\u793a\u4f8b\uff1a</p> <pre><code>const data = {\n    foo: 'something',\n    bar: 42,\n    baz: true,\n}\n\nO.get(O.pick('foo', 'bar'), data)\n// {\n//  foo: 'something',\n//  baz: true,\n// }\n\nO.set(O.pick('foo'), {}, data)\n// {\n//   bar: 42,\n//   baz: true,\n// }\n\nO.set(O.pick(), { quux: 'added' }, data)\n// {\n//   foo: 'something'\n//   bar: 42,\n//   baz: true,\n//   quux: 'added',\n// }\n</code></pre>"},{"location":"reference-standalone/#filter-filter","title":"<code>filter</code> {#<code>filter</code>}","text":"<p><code>filter :: (fn: (elem) =&gt; boolean) =&gt; Lens</code></p> <p>\u53ea\u9002\u7528\u4e8e\u6570\u7ec4\u3002</p> <p>\u521b\u5efa\u4e00\u4e2a\u805a\u7126\u4e8e\u7531 <code>fn</code> \u5339\u914d\u7684\u6570\u7ec4\u5143\u7d20\u7684\u900f\u955c\u3002\u5982\u679c <code>fn</code> \u662f\u7c7b\u578b <code>T</code> \u7684\u7c7b\u578b\u4fdd\u62a4\uff0c\u5219\u5c06\u7126\u70b9\u7684\u7c7b\u578b\u7f29\u5c0f\u4e3a <code>T[]</code>\u3002</p> <p>\u5199\u5165\u66f4\u957f/\u66f4\u77ed\u7684\u6570\u7ec4\u4f1a\u6dfb\u52a0/\u5220\u9664\u5143\u7d20\u3002\u989d\u5916\u7684\u5143\u7d20\u88ab\u6dfb\u52a0\u5230\u6570\u7ec4\u7684\u672b\u5c3e\u3002</p> <p>\u793a\u4f8b\uff1a</p> <pre><code>const l = O.filter((x: number) =&gt; x % 2 === 1)\n\nO.set(l, ['a', 'b', 'c'], [1, 2, 3, 5, 6])\n// ['a', 2, 'b', 'c', 6]\n\nO.set(l, ['a', 'b'], [1, 2, 3, 5, 6])\n// ['a', 2, 'b', 6]\n\nO.set(l, ['a', 'b', 'c', 'd', 'e'], [1, 2, 3, 5, 6])\n// ['a', 2, 'b', 'c', 6, 'd', 'e']\n</code></pre>"},{"location":"reference-standalone/#valueor-valueor","title":"<code>valueOr</code> {#<code>valueor</code>}","text":"<p><code>valueOr :: (defaultValue) =&gt; Lens</code></p> <p>\u521b\u5efa\u4e00\u4e2a\u900f\u955c\uff0c\u5f53\u901a\u8fc7\u5b83\u8bfb\u53d6\u65f6\uff0c\u5982\u679c\u7126\u70b9\u503c\u4e3a <code>undefined</code>\uff0c\u5219\u8fd4\u56de <code>defaultValue</code>\u3002\u5982\u679c\u7126\u70b9\u4e0d\u662f <code>undefined</code>\uff0c\u5219\u8fd4\u56de\u672a\u66f4\u6539\u7684\u7126\u70b9\u3002</p> <p>\u793a\u4f8b\uff1a</p> <pre><code>O.get(O.valueOr(0), undefined)\n// 0\n\nO.get(O.valueOr(0), 42)\n// 42\n\nO.get(O.compose('maxAge', O.valueOr(100)), { maxAge: undefined })\n// 100\n</code></pre>"},{"location":"reference-standalone/#partsof-partsof","title":"<code>partsOf</code> {#<code>partsof</code>}","text":"<p><code>partsOf :: (traversal) =&gt; Lens</code></p> <p>\u7ed9\u5b9a\u4e00\u4e2a\u904d\u5386\uff0c\u521b\u5efa\u4e00\u4e2a\u805a\u7126\u4e8e\u904d\u5386\u7126\u70b9\u7684\u6570\u7ec4\u7684\u900f\u955c\u3002\u5f53\u901a\u8fc7\u8bfb\u53d6\u65f6\uff0c\u7ed3\u679c\u662f\u4e00\u4e2a\u5143\u7d20\u6570\u7ec4\uff0c\u5c31\u50cf\u7531 <code>collect</code> \u751f\u6210\u7684\u90a3\u6837\u3002\u5f53\u901a\u8fc7\u5199\u5165\u65f6\uff0c\u904d\u5386\u7684\u7126\u70b9\u88ab\u66ff\u6362\u4e3a\u6765\u81ea\u5199\u5165\u6570\u7ec4\u7684\u503c\u3002\u5bf9\u4e8e\u591a\u6001\u5199\u5165\uff0c\u904d\u5386\u7684\u7126\u70b9\u83b7\u53d6\u5199\u5165\u6570\u7ec4\u5143\u7d20\u7684\u7c7b\u578b\u3002\u5982\u679c\u5199\u5165\u4e86\u66f4\u77ed\u6216\u66f4\u957f\u7684\u6570\u7ec4\uff0c\u4f1a\u629b\u51fa\u9519\u8bef\u3002\u8fd9\u662f\u4e3a\u4e86\u786e\u4fdd\u6240\u6709\u7126\u70b9\u90fd\u88ab\u66ff\u6362\uff0c\u7c7b\u578b\u662f\u6b63\u786e\u7684\u3002</p> <p>\u793a\u4f8b\uff1a</p> <pre><code>O.set(\n    O.partsOf(O.compose(O.elems, 'foo')),\n    ['x', 'y', 'z'],\n    [{ foo: 'a' }, { foo: 'b' }, { foo: 'c' }]\n)\n// [{ foo: 'x' }, { foo: 'y' }, { foo: 'z' }]\n\nO.modify(O.partsOf(O.words), (words) =&gt; [...words].reverse(), 'this is a test')\n// 'test a is this'\n</code></pre> <p>\u6ce8\u610f\uff0c\u5c06 <code>partsOf</code> \u4e0e\u8bbe\u7f6e\u5668\uff08\u5982 <code>appendTo</code> \u6216 <code>prependTo</code>\uff09\u7ec4\u5408\uff0c\u6216\u901a\u8fc7 <code>partsOf</code> \u5220\u9664\u5143\u7d20\u5c06\u4e0d\u8d77\u4f5c\u7528\uff0c\u56e0\u4e3a\u8bbe\u7f6e\u5668\u6dfb\u52a0\u7684\u989d\u5916\u5143\u7d20\u6216\u5220\u9664\u7684\u5143\u7d20\u5c06\u5bfc\u81f4 <code>partsOf</code> \u629b\u51fa\u9519\u8bef\u3002</p>"},{"location":"reference-standalone/#reread-rewrite-reread-rewrite","title":"<code>reread</code>, <code>rewrite</code> {#<code>reread</code>,-<code>rewrite</code>}","text":"<p><code>reread :: (fn: (value) =&gt; value) =&gt; Lens</code> <code>rewrite :: (fn: (value) =&gt; value) =&gt; Lens</code></p> <p>\u521b\u5efa\u4e00\u4e2a\u53ef\u4ee5\u5728\u8bfb\u65b9\u5411\uff08<code>reread</code>\uff09\u6216\u5199\u65b9\u5411\uff08<code>rewrite</code>\uff09\u4fee\u6539\u503c\u7684\u955c\u5934\u3002\u8fd9\u5728\u67d0\u4e9b\u60c5\u51b5\u4e0b\u786e\u4fdd\u6570\u636e\u7ed3\u6784\u4e0d\u53d8\u6027\u5f88\u6709\u7528\u3002</p> <p><code>reread</code> \u548c <code>rewrite</code> \u90fd\u662f\u5355\u6001\u7684\u3002</p> <p>\u793a\u4f8b\uff1a</p> <pre><code>const read = O.reread((x: string) =&gt; x.toUpperCase())\nconst write = O.rewrite((x: string) =&gt; x.toUpperCase())\n\nO.get(read, 'foo')\n// FOO\n\nO.get(write, 'foo')\n// foo\n\nO.set(read, null, 'foo')\n// foo\n\nO.set(write, null, 'foo')\n// FOO\n</code></pre>"},{"location":"reference-standalone/#lens-lens","title":"<code>lens</code> {#<code>lens</code>}","text":"<p><code>lens :: (view: (v) =&gt; u, update: (v, u) =&gt; v) =&gt; Lens</code></p> <p>\u4ece <code>view</code> \u548c <code>update</code> \u51fd\u6570\u521b\u5efa\u4e00\u4e2a\u955c\u5934\u3002<code>view</code> \u63a5\u53d7\u5f53\u524d\u7126\u70b9\u5e76\u8fd4\u56de\u4e00\u4e2a\u65b0\u7126\u70b9\u3002<code>update</code> \u63a5\u53d7\u539f\u59cb\u7126\u70b9\u548c\u4e00\u4e2a\u503c\uff0c\u5e76\u7528\u8be5\u503c\u66f4\u65b0\u539f\u59cb\u7126\u70b9\u3002</p> <p>\u6ce8\u610f\uff0c<code>lens</code> \u662f\u5355\u6001\u7684\uff0c\u5373\u4f60\u4e0d\u80fd\u5728\u5199\u5165\u65f6\u66f4\u6539\u503c\u7c7b\u578b\u3002\u8fd8\u6ca1\u6709\u591a\u6001\u7684\u66ff\u4ee3\u54c1\uff08\u6682\u65f6\uff09\u3002</p> <p>\u793a\u4f8b\uff1a</p> <pre><code>const lens = O.lens&lt;number | string, number&gt;(\n    (v) =&gt; (typeof v === 'string' ? 0 : v),\n    (_, u) =&gt; u\n)\n\nO.get(lens, 100)\n// 100\n\nO.get(lens, 'foo')\n// 0\n</code></pre>"},{"location":"reference-standalone/#prisms","title":"Prisms","text":""},{"location":"reference-standalone/#optional-optional","title":"<code>optional</code> {#<code>optional</code>}","text":"<p><code>optional :: Prism</code></p> <p>\u5982\u679c\u503c\u4e0d\u662f <code>undefined</code>\uff0c\u5219\u5339\u914d\u7684\u68f1\u955c\u3002\u5c06\u7c7b\u578b\u7f29\u5c0f\u4ee5\u5220\u9664 <code>undefined</code>\uff0c\u4f8b\u5982 <code>number | undefined</code> \u7f29\u5c0f\u4e3a <code>number</code>\u3002</p> <p>\u793a\u4f8b\uff1a</p> <pre><code>const prism = O.compose('foo', O.optional, 'bar')\n\nO.preview(prism, { foo: { bar: 42 } })\n// 42\n\nO.preview(prism, { foo: undefined })\n// undefined\n</code></pre>"},{"location":"reference-standalone/#guard-guard","title":"<code>guard</code> {#<code>guard</code>}","text":"<p><code>guard :: (fn: (value) =&gt; boolean) =&gt; Prism</code> (\u5355\u6001) <code>guard :: &lt;F&gt;() =&gt; (fn: (value) =&gt; boolean) =&gt; Prism</code> (\u591a\u6001)</p> <p>\u521b\u5efa\u4e00\u4e2a\u68f1\u955c\uff0c\u5982\u679c\u503c\u5339\u914d\u7c7b\u578b\u4fdd\u62a4 <code>fn</code>\uff0c\u5219\u5339\u914d\u3002</p> <p>\u7b2c\u4e00\u4e2a\uff0c\u66f4\u7b80\u5355\u7684\u7b7e\u540d\u8fd4\u56de\u4e00\u4e2a\u5355\u6001\u68f1\u955c\uff0c\u53ea\u80fd\u7528\u4e8e\u4e0d\u6539\u53d8\u7126\u70b9\u7c7b\u578b\u7684\u5199\u5165\u3002</p> <p>\u7b2c\u4e8c\u4e2a\u7b7e\u540d\u8fd4\u56de\u4e00\u4e2a\u4f7f\u7528\u7c7b\u578b\u8f6c\u6362 <code>F</code> \u6784\u9020\u7ed3\u679c\u7c7b\u578b\u7684\u591a\u6001\u68f1\u955c\u3002</p> <p>\u5355\u6001\u793a\u4f8b\uff1a</p> <pre><code>type Circle = { type: 'circle'; radius: number }\ntype Square = { type: 'square'; size: number }\ntype Shape = Circle | Square\n\nfunction isCircle(value: Shape): value is Circle {\n    return value.type === 'circle'\n}\n\nconst circle = { type: 'circle', radius: 42 }\nconst square = { type: 'square', size: 10 }\n\nconst circleRadius = O.compose(O.guard(isCircle), 'radius')\n\nO.preview(circleRadius, square)\n// undefined\n\nO.preview(circleRadius, circle)\n// 42\n\nO.set(circleRadius, 99, square)\n// { type: 'square', size: 10 }\n\nO.set(circleRadius, 99, circle)\n// { type: 'circle', radius: 99 }\n</code></pre> <p>\u591a\u6001\u793a\u4f8b\uff1a</p> <pre><code>type Some&lt;T&gt; = { type: 'some'; value: T }\ntype None = { type: 'none' }\ntype Option&lt;T&gt; = Some&lt;T&gt; | None\n\n// O.HKT \u662f\u4e00\u4e2a \"\u7c7b\u578b\u8f6c\u6362\" \u6216 \"\u9ad8\u9636\u7c7b\u578b\"\u3002this[1] \u662f\u8f93\u5165\n// \u7c7b\u578b\uff0c\u8f93\u51fa\u4ece prop 0 \u53d6\u5f97\u3002\n//\n// SomeF \u7c7b\u578b\u8f6c\u6362\u53ea\u68c0\u67e5 this[1] \u4e2d\u7684\u8f93\u5165\u7c7b\u578b\u662f\u5426\u5177\u6709\n// Some \u7684\u5f62\u72b6\uff0c\u5e76\u539f\u6837\u901a\u8fc7\u3002\u6362\u53e5\u8bdd\u8bf4\uff0c\u5199\u5165\u8005\u53ef\u4ee5\u66f4\u6539 'value' prop \u7684\u7c7b\u578b\uff0c\u4f46\u4e0d\u80fd\u66f4\u6539\u5176\u4ed6\u4efb\u4f55\u4e1c\u897f\u3002\n//\ninterface SomeF extends O.HKT {\n    0: this[1] extends Some&lt;any&gt; ? this[1] : never\n}\n\nfunction isSomeNumber(value: Option&lt;number&gt;): value is Some&lt;number&gt; {\n    return value.type === 'some'\n}\n\nconst someValue = O.compose(O.guard&lt;SomeF&gt;()(isSomeNumber), 'value')\n\nconst some: Option&lt;number&gt; = { type: 'some', value: 42 }\nconst none: Option&lt;number&gt; = { type: 'none' }\n\nO.preview(someValue, none)\n// undefined\n\nO.preview(someValue, some)\n// 42\n\nconst result1: Option&lt;string&gt; = O.set(someValue, 'foo', none)\n// { type: 'none' }\n\nconst result2: Option&lt;string&gt; = O.set(someValue, 'foo', some)\n// { type: 'some', value: 'foo' }\n</code></pre>"},{"location":"reference-standalone/#at-at","title":"<code>at</code> {#<code>at</code>}","text":"<p><code>at :: (i) =&gt; RemovablePrism</code></p> <p>\u53ea\u9002\u7528\u4e8e\u6570\u7ec4\u548c\u5b57\u7b26\u4e32\u3002\u53ef\u79fb\u9664\u3002</p> <p>\u521b\u5efa\u4e00\u4e2a\u68f1\u955c\uff0c\u4e13\u6ce8\u4e8e\u6570\u7ec4\u7684\u7b2c n \u4e2a\u5143\u7d20\u6216\u5b57\u7b26\u4e32\u7684\u7b2c n \u4e2a\u5b57\u7b26\uff08\u957f\u5ea6\u4e3a 1 \u7684\u5b50\u5b57\u7b26\u4e32\uff09\u3002</p> <p>\u5728\u5b57\u7b26\u4e32\u4e0a\u4f7f\u7528\u65f6\uff0c\u53ea\u80fd\u5199\u5165\u5b57\u7b26\u4e32\u3002\u652f\u6301\u5199\u5165\u4e0d\u540c\u957f\u5ea6\u7684\u5b57\u7b26\u4e32\u3002</p> <p>\u793a\u4f8b\uff1a</p> <pre><code>O.preview(O.at(1), ['a', 'b', 'c'])\n// 'b'\n\nO.preview(O.at(1), ['a'])\n// undefined\n\nO.set(O.at(1), 123, ['a', 'b', 'c'])\n// ['a', 123, 'c']\n\nO.set(O.at(1), 123, ['a'])\n// ['a']\n\nO.remove(O.at(1), ['a', 'b', 'c'])\n// ['a', 'c']\n\nO.preview(O.at(1), 'abc')\n// 'b'\n\nO.preview(O.at(1), 'a')\n// undefined\n\nO.set(O.at(1), 'X', 'abc')\n// 'aXc'\n\nO.set(O.at(1), 'X', 'a')\n// 'a'\n\nO.set(O.at(1), 'XYZ', 'abc')\n// 'aXYZc'\n\nO.set(O.at(1), '', 'abc')\n// 'ac'\n\nO.remove(O.at(1), 'abc')\n// 'ac'\n</code></pre>"},{"location":"reference-standalone/#head-head","title":"<code>head</code> {#<code>head</code>}","text":"<p><code>head :: Prism</code></p> <p><code>at(0)</code>\u7684\u7b80\u5199\u3002</p>"},{"location":"reference-standalone/#atkey-atkey","title":"<code>atKey</code> {#<code>atkey</code>}","text":"<p><code>atKey :: (key) =&gt; RemovablePrism</code></p> <p>\u4ec5\u9002\u7528\u4e8e\u8bb0\u5f55\uff08<code>Record&lt;string, T&gt;</code>\uff09\u3002\u53ef\u79fb\u9664\u3002</p> <p>\u521b\u5efa\u4e00\u4e2a\u805a\u7126\u4e8e\u8bb0\u5f55\u952e\u7684\u68f1\u955c\u3002</p> <p>\u793a\u4f8b\uff1a</p> <pre><code>O.preview(O.atKey('foo'), { foo: 'bar' })\n// 'bar'\n\nO.preview(O.atKey('foo'), { hello: 'world' })\n// undefined\n\nO.set(O.atKey('foo'), 123, { foo: 'bar', hello: 'world' })\n// { foo: 123, hello: 'world' }\n\nO.set(O.atKey('foo'), 123, { hello: 'world' })\n// { hello: 'world' }\n\nO.remove(O.atKey('foo'), { foo: 'bar', hello: 'world' })\n// { hello: 'world' }\n</code></pre>"},{"location":"reference-standalone/#find-find","title":"<code>find</code> {#<code>find</code>}","text":"<p><code>find :: (fn: (elem) =&gt; boolean) =&gt; RemovablePrism</code></p> <p>\u4ec5\u9002\u7528\u4e8e\u6570\u7ec4\u3002\u53ef\u79fb\u9664\u3002</p> <p>\u521b\u5efa\u4e00\u4e2a\u68f1\u955c\uff0c\u805a\u7126\u4e8e\u6570\u7ec4\u4e2d\u7b2c\u4e00\u4e2a\u5339\u914d\u8c13\u8bcd <code>fn</code> \u7684\u5143\u7d20\u3002</p> <p>\u793a\u4f8b\uff1a</p> <pre><code>const negativeElem = O.find((x: number) =&gt; x &lt; 0)\n\nO.preview(negativeElem, [1, 0, -1, -2])\n// -1\n\nO.modify(negativeElem, (x) =&gt; -x, [1, 0, -1, -2])\n// [1, 0, 1, -2]\n\nO.preview(negativeElem, [0, 2, 1])\n// undefined\n</code></pre>"},{"location":"reference-standalone/#when-when","title":"<code>when</code> {#<code>when</code>}","text":"<p><code>when :: (fn: (value) =&gt; boolean) =&gt; Prism</code></p> <p>\u521b\u5efa\u4e00\u4e2a\u68f1\u955c\uff0c\u5f53\u7126\u70b9\u5339\u914d\u8c13\u8bcd <code>fn</code> \u65f6\uff0c\u5b83\u4f1a\u5339\u914d\u3002\u7279\u522b\u9002\u7528\u4e8e\u8fc7\u6ee4\u904d\u5386\u7684\u7126\u70b9\u3002</p> <p>\u793a\u4f8b\uff1a</p> <pre><code>const longWords = O.compose(\n    O.words,\n    O.when((s: string) =&gt; s.length &gt;= 5)\n)\nconst text = 'Some shorter and some longer words'\n\nO.collect(longWords, text)\n// ['shorter', 'longer', 'words']\n\nO.modify(longWords, (s) =&gt; s.toUpperCase(), text)\n// \"Some SHORTER and some LONGER WORDS\"\n</code></pre>"},{"location":"reference-standalone/#traversals","title":"Traversals","text":""},{"location":"reference-standalone/#elems-elems","title":"<code>elems</code> {#<code>elems</code>}","text":"<p><code>elems :: Traversal</code></p> <p>\u4ec5\u9002\u7528\u4e8e\u6570\u7ec4\u3002</p> <p>\u4e00\u4e2a\u904d\u5386\uff0c\u805a\u7126\u4e8e\u6570\u7ec4\u7684\u6240\u6709\u5143\u7d20\u3002</p> <pre><code>O.collect(O.compose(O.elems, 'foo', 'bar'), [\n    { foo: { bar: 1 } },\n    { foo: { bar: 2 } },\n])\n// [1, 2]\n</code></pre>"},{"location":"reference-standalone/#getters","title":"Getters","text":"<p>Getters \u662f\u5177\u6709\u5355\u4e00\u7126\u70b9\u7684\u53ea\u8bfb\u5149\u5b66\u5143\u7d20\u3002\u4f60\u53ef\u4ee5\u5c06\u5b83\u4eec\u89c6\u4e3a\u5355\u5411\u540c\u6784\u6216\u53ea\u8bfb\u955c\u5934\u3002</p>"},{"location":"reference-standalone/#to-to","title":"<code>to</code> {#<code>to</code>}","text":"<p><code>to :: (fn: (v) =&gt; u) =&gt; Getter</code></p> <p>\u521b\u5efa\u4e00\u4e2a getter\uff0c\u5c06\u51fd\u6570 <code>fn</code> \u5e94\u7528\u4e8e\u5176\u7126\u70b9\u3002</p>"},{"location":"reference-standalone/#setters","title":"Setters","text":""},{"location":"reference-standalone/#prependto-appendto-prependto-appendto","title":"<code>prependTo</code>, <code>appendTo</code> {#<code>prependto</code>,-<code>appendto</code>}","text":"<p><code>prependTo :: Setter</code> <code>appendTo :: Setter</code></p> <p>\u4ec5\u9002\u7528\u4e8e\u6570\u7ec4\u3002</p> <p><code>prependTo</code> \u805a\u7126\u4e8e\u6570\u7ec4\u7684\u7b2c\u4e00\u4e2a\u5143\u7d20\u4e4b\u524d\u7684\u90e8\u5206\uff0c<code>appendTo</code> \u805a\u7126\u4e8e\u6570\u7ec4\u7684\u6700\u540e\u4e00\u4e2a\u5143\u7d20\u4e4b\u540e\u7684\u90e8\u5206\u3002\u5f53\u901a\u8fc7\u5199\u5165\u65f6\uff0c\u5c06\u503c\u524d\u7f6e\u6216\u8ffd\u52a0\u5230\u6570\u7ec4\u3002</p> <pre><code>O.set(O.appendTo, 3, [0, 1, 2])\n// [0, 1, 2, 3]\n\nO.set(O.prependTo, 3, [0, 1, 2])\n// [3, 0, 1, 2]\n</code></pre>"},{"location":"reference-standalone/#string-traversals","title":"String traversals","text":""},{"location":"reference-standalone/#chars-chars","title":"<code>chars</code> {#<code>chars</code>}","text":"<p><code>chars :: Traversal</code></p> <p>\u4ec5\u9002\u7528\u4e8e\u5b57\u7b26\u4e32\u3002</p> <p>\u4e00\u4e2a\u904d\u5386\uff0c\u805a\u7126\u4e8e\u5b57\u7b26\u4e32\u7684\u6240\u6709\u5b57\u7b26\u3002</p> <p>\u5f53\u901a\u8fc7\u5199\u5165\u65f6\uff0c\u53ef\u4ee5\u901a\u8fc7\u5199\u5165\u7a7a\u5b57\u7b26\u4e32\u6765\u5220\u9664\u5b57\u7b26\uff0c\u6216\u8005\u66f4\u6539\u4e3a\u66f4\u957f\u7684\u5b57\u7b26\u4e32\u3002</p> <pre><code>O.collect(O.chars, 'foo')\n// ['f', 'o', 'o']\n\nO.modify(O.chars, (c) =&gt; (c == 'o' ? '' : c.toUpperCase()), 'foobar')\n// 'FBAR'\n</code></pre>"},{"location":"reference-standalone/#words-words","title":"<code>words</code> {#<code>words</code>}","text":"<p><code>words :: Traversal</code></p> <p>\u4ec5\u9002\u7528\u4e8e\u5b57\u7b26\u4e32\u3002</p> <p>\u4e00\u4e2a\u904d\u5386\uff0c\u805a\u7126\u4e8e\u5b57\u7b26\u4e32\u7684\u6240\u6709\u5355\u8bcd\u3002\u5355\u8bcd\u662f\u7531\u7a7a\u683c\u5206\u9694\u7684\u5b50\u5b57\u7b26\u4e32\u3002</p> <p>\u5f53\u901a\u8fc7\u5199\u5165\u65f6\uff0c\u53ef\u4ee5\u901a\u8fc7\u5199\u5165\u7a7a\u5b57\u7b26\u4e32\u6765\u5220\u9664\u5355\u8bcd\uff0c\u6216\u8005\u66f4\u6539\u4e3a\u66f4\u957f\u6216\u66f4\u77ed\u7684\u5b57\u7b26\u4e32\u3002</p> <pre><code>O.collect(O.words, 'foo, bar')\n// ['foo,', 'bar']\n\nO.modify(O.words, (word) =&gt; word.split('').reverse().join(''), 'foo, bar')\n// ',oof rab'\n</code></pre>"},{"location":"reference-standalone/#miscellaneous","title":"Miscellaneous","text":""},{"location":"reference-standalone/#eq-eq","title":"<code>eq</code> {#<code>eq</code>}","text":"<p><code>eq :: Equivalence</code></p> <p>Equivalence \u662f\u4e00\u4e2a\u4e0d\u505a\u4efb\u4f55\u4e8b\u60c5\u7684\u7a7a\u64cd\u4f5c\u3002\u5728\u7ec4\u5408\u4e2d\u5145\u5f53\u8eab\u4efd\u3002</p>"},{"location":"reference-standalone/#pipe-pipe","title":"<code>pipe</code> {#<code>pipe</code>}","text":"<p><code>pipe :: (a, f1, f2, ...) =&gt; v</code></p> <p>\u5c06\u8868\u8fbe\u5f0f\u7684\u503c\uff08<code>a</code>\uff09\u4f20\u5165\u6700\u591a 9 \u4e2a\u4e00\u5143\u51fd\u6570\uff08<code>f1</code>\uff0c<code>f2</code>\uff0c...\uff09\u7684\u7ba1\u9053\u3002</p> <p>\u793a\u4f8b\uff1a</p> <pre><code>pipe(\n  { foo: 1, bar: { baz: 2 } },\n  O.set(O.prop('foo'), 3),\n  O.modify(O.compose('bar', 'baz'), (v: number) =&gt; -v)\n)\n// { foo: 3, bar: { baz: -2 } }\n</code></pre>"},{"location":"tutorial/","title":"\u6559\u7a0b","text":"<p>\u6240\u6709\u793a\u4f8b\u90fd\u5047\u5b9a\u4e86\u4ee5\u4e0b\u7684\u5bfc\u5165\u3002</p> <p>\u65b9\u6cd5\u94fe\uff1a</p> <pre><code>import * as O from 'optics-ts'\n</code></pre> <p>\u72ec\u7acb\uff1a</p> <pre><code>import * as O from 'optics-ts/standalone'\n</code></pre> <p>\u67e5\u770b\u4e24\u79cd\u8bed\u6cd5\u4e86\u89e3\u4e24\u8005\u4e4b\u95f4\u7684\u533a\u522b\uff0c\u4ee5\u53ca\u5e94\u8be5\u9009\u62e9\u54ea\u4e00\u79cd\u3002\u4ee5\u4e0b\u6240\u6709\u7684\u63cf\u8ff0\u548c\u793a\u4f8b\u90fd\u5c06\u4ee5\u4e24\u79cd\u8bed\u6cd5\u7ed9\u51fa\u3002</p>"},{"location":"tutorial/#lens","title":"Lens","text":"\u65b9\u6cd5\u94fe\u72ec\u7acb <p>Lens(\u900f\u955c)\u662f\u4f60\u5c06\u8981\u4f7f\u7528\u7684\u6700\u5e38\u89c1\u7684\u5149\u5b66\u5668\u4ef6\u3002\u4f60\u53ef\u4ee5\u901a\u8fc7\u8c03\u7528 <code>optic()</code> \u4e3a\u4e00\u4e2a\u6570\u636e\u7ed3\u6784\u521b\u5efa\u4e00\u4e2a\u5149\u5b66\u5668\u4ef6\uff0c\u5e76\u901a\u8fc7 <code>prop</code> \u5c06\u5176\u8f6c\u6362\u4e3a\u4e00\u4e2a\u5173\u6ce8\u5bf9\u8c61\u5c5e\u6027\u7684\u955c\u5934\uff1a</p> <pre><code>type Data = {\n  foo: { bar: number }\n  other: string\n}\nconst foo = O.optic&lt;Data&gt;().prop('foo')\n</code></pre> <p><code>foo</code> \u73b0\u5728\u662f\u4e00\u4e2a\u5173\u6ce8 <code>Data.foo</code> \u7684\u955c\u5934\u3002</p> <p>\u8981\u6df1\u5165\u6316\u6398\uff0c\u53ea\u9700\u518d\u6b21\u8c03\u7528 <code>prop</code>\uff1a</p> <pre><code>const bar = O.optic&lt;Data&gt;().prop('foo').prop('bar')\n// \u6216\u8005\u4ece\u6211\u4eec\u4e0a\u9762\u5b9a\u4e49\u7684 `foo` \u955c\u5934\u5f00\u59cb\nconst bar = foo.prop('bar')\n// \u6216\u8005\u4f7f\u7528 .path() \u901a\u8fc7\u4e00\u6b21\u8c03\u7528\u7ec4\u5408\u591a\u4e2a prop \u955c\u5934\nconst bar = O.optic&lt;Data&gt;().path('foo', 'bar')\n// \u6216\u8005\u4f7f\u7528\u5e26\u6709\u70b9\u5206\u9694\u7684\u5b57\u7b26\u4e32\u8def\u5f84\u7684 path\nconst bar = O.optic&lt;Data&gt;().path('foo.bar')\n</code></pre> <p>\u4f7f\u7528 <code>get</code> \u901a\u8fc7\u955c\u5934\u8bfb\u53d6\u4e00\u4e2a\u503c\uff1a</p> <pre><code>const data: Data = {\n  foo: { bar: 42 },\n  other: 'stuff',\n}\n\nO.get(bar)(data)\n// 42\n</code></pre> <p>\u4f7f\u7528 <code>set</code> \u6216 <code>modify</code> \u901a\u8fc7\u955c\u5934\u5199\u5165\u5173\u6ce8\u7684\u503c\uff1a</p> <pre><code>O.set(bar)(99)(data)\n// {\n//   foo: { bar: 99 },\n//   other: 'stuff'\n// }\n\nO.modify(bar, (x) =&gt; x * 100, data)\n// {\n//   foo: { bar: 4200 },\n//   other: 'stuff'\n// }\n</code></pre> <p>Lens(\u900f\u955c)\u662f\u4f60\u5c06\u8981\u4f7f\u7528\u7684\u6700\u5e38\u89c1\u7684\u5149\u5b66\u5668\u4ef6\u3002\u4f60\u53ef\u4ee5\u521b\u5efa\u4e00\u4e2a\u5173\u6ce8\u5bf9\u8c61\u5c5e\u6027\u7684\u955c\u5934\uff1a</p> <pre><code>const foo = O.prop('foo')\n</code></pre> <p><code>foo</code> \u73b0\u5728\u662f\u4e00\u4e2a\u5173\u6ce8\u4efb\u4f55\u7ed9\u5b9a\u5bf9\u8c61\u7684 <code>foo</code> \u5c5e\u6027\u7684\u955c\u5934\u3002</p> <p>\u8981\u6df1\u5165\u6316\u6398\uff0c\u7ec4\u5408\u591a\u4e2a <code>prop</code> \u955c\u5934\uff1a</p> <pre><code>const bar = O.compose(O.prop('foo'), O.prop('bar'))\n// \u6216\u8005\u590d\u7528\u6211\u4eec\u4e0a\u9762\u5b9a\u4e49\u7684 `foo` \u955c\u5934\nconst bar = O.compose(foo, O.prop('bar'))\n</code></pre> <p>\u56e0\u4e3a <code>prop</code> \u662f\u4e00\u4e2a\u7ecf\u5e38\u4f7f\u7528\u7684\u955c\u5934\uff0c\u4f60\u53ef\u4ee5\u76f4\u63a5\u5c06\u5b57\u7b26\u4e32\u53c2\u6570\u4f20\u9012\u7ed9 <code>compose</code>\uff0c\u5b83\u4eec\u5c06\u88ab\u89c6\u4e3a <code>prop</code> \u955c\u5934\uff1a</p> <pre><code>const bar = O.compose('foo', 'bar')\n</code></pre> <p>\u4f7f\u7528 <code>get</code> \u901a\u8fc7\u955c\u5934\u8bfb\u53d6\u4e00\u4e2a\u503c\uff1a</p> <pre><code>const data = {\n  foo: { bar: 42 },\n  other: 'stuff',\n}\n\nO.get(bar, data)\n// 42\n</code></pre> <p>\u4f7f\u7528 <code>set</code> \u6216 <code>modify</code> \u901a\u8fc7\u955c\u5934\u5199\u5165\u5173\u6ce8\u7684\u503c\uff1a</p> <pre><code>O.set(bar, 99, data)\n// {\n//   foo: { bar: 99 },\n//   other: 'stuff'\n// }\n\nO.modify(bar, (x) =&gt; x * 100, data)\n// {\n//   foo: { bar: 4200 },\n//   other: 'stuff'\n// }\n</code></pre> <p>\u901a\u8fc7\u5149\u5b66\u5668\u4ef6\u5199\u5165\u603b\u662f\u4f1a\u521b\u5efa\u4e00\u4e2a\u65b0\u7684\u6570\u636e\u7ed3\u6784\uff0c\u800c\u4e0d\u662f\u5c31\u5730\u4fee\u6539\u73b0\u6709\u7684\u6570\u636e\u7ed3\u6784\uff0c\u53ea\u590d\u5236\u6240\u9700\u7684\u90e8\u5206\u3002\u6362\u53e5\u8bdd\u8bf4\uff0c\u6570\u636e\u662f\u4e0d\u53ef\u53d8\u7684\u3002</p>"},{"location":"tutorial/#prism","title":"Prism","text":"<p>\u900f\u955c\u975e\u5e38\u9002\u5408\u805a\u7126\u5230\u66f4\u5927\u7ed3\u6784\u7684\u4e00\u90e8\u5206\u3002\u68f1\u955c\u5f88\u50cf\u900f\u955c\uff0c\u4f46\u5b83\u4eec\u4e0d\u4e00\u5b9a\u5339\u914d\u4efb\u4f55\u4e1c\u897f\uff0c\u5373\u5b83\u4eec\u53ef\u4ee5\u6709\u96f6\u7126\u70b9\u3002</p> <p>\u4e00\u4e2a\u5b9e\u9645\u7684\u4f8b\u5b50\u662f\u805a\u7126\u5230\u8054\u5408\u7c7b\u578b\u7684\u4e00\u4e2a\u5206\u652f\u3002\u5728\u8fd9\u91cc\uff0c<code>User.age</code>\u5b57\u6bb5\u53ef\u4ee5\u662f<code>number</code>\u6216<code>undefined</code>\u3002\u4f7f\u7528<code>optional</code>\u68f1\u955c\uff0c\u6211\u4eec\u53ea\u5728\u503c\u4e3a<code>number</code>\u65f6\u805a\u7126\uff0c\u5f53\u5b83\u4e3a<code>undefined</code>\u65f6\u4e0d\u505a\u4efb\u4f55\u4e8b\u60c5\uff1a</p> \u65b9\u6cd5\u94fe\u72ec\u7acb <pre><code>type User = {\n    name: string\n    age?: number | undefined\n}\n\nconst age = O.optic&lt;User&gt;().prop('age').optional()\n</code></pre> <pre><code>type User = {\n    name: string\n    age?: number | undefined\n}\n\nconst age = O.compose('age', O.optional)\n</code></pre> <p>\u4f60\u53ef\u4ee5\u4f7f\u7528<code>preview</code>\u51fd\u6570\u901a\u8fc7\u68f1\u955c\u9605\u8bfb\u3002\u5f53\u68f1\u955c\u4e0d\u5339\u914d\u65f6\uff0c\u5b83\u8fd4\u56de<code>undefined</code>\u3002</p> \u65b9\u6cd5\u94fe\u72ec\u7acb <pre><code>const userWithAge: User = {\n    name: 'Betty',\n    age: 42,\n}\nO.preview(age)(userWithAge)\n// 42\n\nconst userWithoutAge: User = {\n    name: 'Max',\n    age: undefined,\n}\nO.preview(age)(userWithoutAge)\n// undefined\n</code></pre> <pre><code>const userWithAge: User = {\n    name: 'Betty',\n    age: 42,\n}\nO.preview(age, userWithAge)\n// 42\n\nconst userWithoutAge: User = {\n    name: 'Max',\n    age: undefined,\n}\nO.preview(age, userWithoutAge)\n// undefined\n</code></pre> <p>\u4f60\u53ef\u4ee5\u7528<code>set</code>\u548c<code>modify</code>\u6b63\u5e38\u5730\u901a\u8fc7\u68f1\u955c\u5199\u5165\u3002\u5982\u679c\u68f1\u955c\u4e0d\u5339\u914d\uff0c\u503c\u4e0d\u53d8\uff1a</p> \u65b9\u6cd5\u94fe\u72ec\u7acb <pre><code>O.modify(age)((n) =&gt; n + 1)(userWithAge)\n// {\n//   name: 'Betty',\n//   age: 43,\n// }\n\nO.set(age)(60)(userWithoutAge)\n// {\n//   name: 'Max',\n//   age: undefined,\n// }\n</code></pre> <pre><code>O.modify(age, (n) =&gt; n + 1, userWithAge)\n// {\n//   name: 'Betty',\n//   age: 43,\n// }\n\nO.set(age, 60, userWithoutAge)\n// {\n//   name: 'Max',\n//   age: undefined,\n// }\n</code></pre> <p><code>guard</code>\u662f\u521b\u5efa\u68f1\u955c\u7684\u53e6\u4e00\u79cd\u65b9\u5f0f\u3002\u5b83\u662f<code>optional</code>\u7684\u6cdb\u5316\uff0c\u610f\u5473\u7740\u4f60\u53ef\u4ee5\u5339\u914d\u8054\u5408\u7c7b\u578b\u7684\u4efb\u4f55\u5206\u652f\uff0c\u800c\u4e0d\u4ec5\u4ec5\u662f\u975e<code>undefined</code>\u90e8\u5206\uff1a</p> <pre><code>interface Circle {\n    kind: 'circle'\n    radius: number\n}\ninterface Rectangle {\n    kind: 'rectangle'\n    width: number\n    height: number\n}\ntype Shape = Circle | Rectangle\n\nfunction isRectangle(s: Shape): s is Rectangle {\n    return s.kind === 'rectangle'\n}\n</code></pre> \u65b9\u6cd5\u94fe\u72ec\u7acb <pre><code>const rectWidth = O.optic&lt;Shape&gt;().guard(isRectangle).prop('width')\n\nO.preview(rectWidth)({ kind: 'circle', radius: 10 })\n// undefined\n\nO.preview(rectWidth)({ kind: 'rectangle', width: 5, height: 7 })\n// 5\n\nO.modify(rectWidth)((w) =&gt; w * 2)({ kind: 'rectangle', width: 5, height: 7 })\n// { kind: 'rectangle', width: 10, height: 7 })\n</code></pre> <pre><code>const rectWidth = O.compose(O.guard(isRectangle), 'width')\n\nO.preview(rectWidth, { kind: 'circle', radius: 10 })\n// undefined\n\nO.preview(rectWidth, { kind: 'rectangle', width: 5, height: 7 })\n// 5\n\nO.modify(rectWidth, (w) =&gt; w * 2, { kind: 'rectangle', width: 5, height: 7 })\n// { kind: 'rectangle', width: 10, height: 7 })\n</code></pre> <p>\u6ce8\u610f\uff0c\u4e0a\u9762\u6211\u4eec\u5982\u4f55\u5c06<code>guard</code>\u68f1\u955c\u4e0e<code>prop</code>\u900f\u955c\u7ec4\u5408\u3002\u8fd9\u4ea7\u751f\u4e86\u4e00\u4e2a\u68f1\u955c\uff0c\u6240\u4ee5\u6211\u4eec\u4f7f\u7528<code>preview</code>\u6765\u901a\u8fc7\u5b83\u9605\u8bfb\u3002\u67e5\u770b\u7ec4\u5408\u89c4\u5219\u4ee5\u83b7\u53d6\u66f4\u591a\u4fe1\u606f\u3002</p>"},{"location":"tutorial/#removable-optics","title":"\u53ef\u62c6\u5378\u5149\u5b66\u5668\u4ef6","text":"<p>\u6709\u4e9b\u5149\u5b66\u5668\u4ef6\u662f\u53ef\u62c6\u5378\u7684\u3002\u8fd9\u610f\u5473\u7740\u5b83\u4eec\u805a\u7126\u5230\u5bb9\u5668\uff08\u4f8b\u5982\uff0c\u6570\u7ec4\uff09\u7684\u4e00\u4e2a\u5143\u7d20\uff0c\u5e76\u4e14\u4f60\u53ef\u4ee5\u4ece\u5bb9\u5668\u4e2d\u79fb\u9664\u8be5\u5668\u4ef6\u3002</p> <p><code>at</code>\u662f\u4e00\u4e2a\u53ef\u79fb\u9664\u7684\u68f1\u955c\u3002\u5b83\u805a\u7126\u5230\u6570\u7ec4\u7684\u4e00\u4e2a\u7d22\u5f15\uff0c\u5e76\u4e14\u4e5f\u8ba9\u4f60\u53ef\u4ee5\u79fb\u9664\u8be5\u7d22\u5f15\uff1a</p> \u65b9\u6cd5\u94fe\u72ec\u7acb <pre><code>interface User {\n    name: string\n}\n\nconst threeUsers: User[] = [\n    { name: 'Max' },\n    { name: 'Betty' },\n    { name: 'Alice' },\n]\n\nconst secondUser = O.optic&lt;User[]&gt;().at(1)\nO.remove(secondUser)(threeUsers)\n// [{ name: 'Max' }, { name: 'Alice' }]\n</code></pre> <pre><code>interface User {\n    name: string\n}\n\nconst threeUsers: User[] = [\n    { name: 'Max' },\n    { name: 'Betty' },\n    { name: 'Alice' },\n]\n\nO.remove(O.at(1), threeUsers)\n// [{ name: 'Max' }, { name: 'Alice' }]\n</code></pre> <p>\u5982\u679c\u5149\u5b66\u5143\u7d20\u4e0d\u5339\u914d\uff0c\u79fb\u9664\u64cd\u4f5c\u6ca1\u6709\u6548\u679c\uff1a</p> \u65b9\u6cd5\u94fe\u72ec\u7acb <pre><code>const oneUser: User[] = [{ name: 'Max' }]\n\nO.remove(secondUser)(oneUser)\n// [{ name: 'Max' }]\n</code></pre> <pre><code>const oneUser: User[] = [{ name: 'Max' }]\n\nO.remove(O.at(1), oneUser)\n// [{ name: 'Max' }]\n</code></pre>"},{"location":"tutorial/#traversal","title":"\u904d\u5386","text":"<p>\u4e0b\u4e00\u4e2a\u5149\u5b66\u5143\u7d20\u7c7b\u578b\u662f\u904d\u5386\u3002\u867d\u7136\u900f\u955c\u6709\u4e00\u4e2a\u7126\u70b9\uff0c\u68f1\u955c\u6709\u96f6\u4e2a\u6216\u4e00\u4e2a\u7126\u70b9\uff08\u4e0d\u5339\u914d\u6216\u5339\u914d\uff09\uff0c\u904d\u5386\u6709\u96f6\u4e2a\u6216\u66f4\u591a\u7684\u7126\u70b9\u3002</p> <p>\u904d\u5386\u7684\u6700\u7b80\u5355\u4f8b\u5b50\u662f\u805a\u7126\u5230\u6570\u7ec4\u7684\u6240\u6709\u5143\u7d20\u3002\u8981\u521b\u5efa\u8fd9\u6837\u7684\u904d\u5386\uff0c\u4f7f\u7528<code>elems</code>\uff1a</p> \u65b9\u6cd5\u94fe\u72ec\u7acb <pre><code>type Person {\n    name: string\n    friends: Person[]\n}\n\nconst friendsNames = O.optic&lt;Person&gt;()\n    .prop('friends')\n    .elems()\n    .prop('name')\n</code></pre> <pre><code>type Person {\n    name: string\n    friends: Person[]\n}\n\nconst friendsNames = O.compose('friends', O.elems, 'name')\n</code></pre> <p>\u8981\u901a\u8fc7\u904d\u5386\u8fdb\u884c\u8bfb\u53d6\uff0c\u8c03\u7528<code>collect</code>\u5c06\u6240\u6709\u805a\u7126\u7684\u5143\u7d20\u6536\u96c6\u5230\u4e00\u4e2a\u6570\u7ec4\u4e2d\uff1a</p> \u65b9\u6cd5\u94fe\u72ec\u7acb <pre><code>const john = { name: 'John', friends: [] }\nconst bruce = { name: 'Bruce', friends: [] }\nconst amy = { name: 'Amy', friends: [john, bruce] }\n\nO.collect(friendsNames)(amy)\n// [ 'John', 'Bruce' ]\n</code></pre> <pre><code>const john = { name: 'John', friends: [] }\nconst bruce = { name: 'Bruce', friends: [] }\nconst amy = { name: 'Amy', friends: [john, bruce] }\n\nO.collect(friendsNames, amy)\n// [ 'John', 'Bruce' ]\n</code></pre> <p>\u901a\u8fc7\u904d\u5386\u8fdb\u884c\u5199\u5165\u4f1a\u5199\u5165\u5230\u6240\u6709\u805a\u7126\u7684\u503c\uff1a</p> \u65b9\u6cd5\u94fe\u72ec\u7acb <pre><code>O.modify(friendsNames)((name) =&gt; `${name} Wayne`)(amy)\n// {\n//   name: 'Amy',\n//   friends: [\n//     { name: 'John Wayne', friends: [] },\n//     { name: 'Bruce Wayne', friends: [] },\n//   ],\n// }\n</code></pre> <pre><code>O.modify(friendsNames, (name) =&gt; `${name} Wayne`, amy)\n// {\n//   name: 'Amy',\n//   friends: [\n//     { name: 'John Wayne', friends: [] },\n//     { name: 'Bruce Wayne', friends: [] },\n//   ],\n// }\n</code></pre> <p>\u518d\u6b21\u6ce8\u610f\u6211\u4eec\u5982\u4f55\u4f7f\u7528<code>prop</code>\u3001<code>elems</code>\u548c<code>prop</code>\uff0c\u5c06\u900f\u955c\u4e0e\u904d\u5386\u7ec4\u5408\uff0c\u7136\u540e\u518d\u4e0e\u900f\u955c\u7ec4\u5408\u3002\u8fd9\u4ea7\u751f\u4e86\u4e00\u4e2a\u904d\u5386\u3002\u67e5\u770b\u7ec4\u5408\u89c4\u5219\u4ee5\u83b7\u53d6\u66f4\u591a\u4fe1\u606f\u3002</p> <p>\u6709\u65f6\u5019\uff0c\u6211\u4eec\u9700\u8981\u8fdb\u4e00\u6b65\u5173\u6ce8\u904d\u5386\u7684\u67d0\u4e9b\u5143\u7d20\u3002\u8fd9\u53ef\u4ee5\u901a\u8fc7\u5c06\u904d\u5386\u4e0e\u50cf<code>when</code>\u8fd9\u6837\u7684\u68f1\u955c\u7ec4\u5408\u6765\u5b9e\u73b0\uff0c<code>when</code>\u4f1a\u8df3\u8fc7\u4e0d\u7b26\u5408\u8c13\u8bcd\u7684\u9879\uff1a</p> \u65b9\u6cd5\u94fe\u72ec\u7acb <pre><code>const even = O.optic&lt;number[]&gt;()\n    .elems()\n    .when((n) =&gt; n % 2 === 0)\n\nO.modify(even)((n) =&gt; -n)([1, 2, 3, 4, 5])\n// [1, -2, 3, -4, 5]\n</code></pre> <pre><code>const even = O.compose(\n    O.elems,\n    O.when((n: number) =&gt; n % 2 === 0)\n)\n\nO.modify(even, (n) =&gt; -n, [1, 2, 3, 4, 5])\n// [1, -2, 3, -4, 5]\n</code></pre>"},{"location":"tutorial/#polymorphism","title":"\u591a\u6001\u6027","text":"\u65b9\u6cd5\u94fe\u72ec\u7acb <p>\u5149\u5b66\u5143\u7d20\u53ef\u4ee5\u662f\u591a\u6001\u7684\uff0c\u8fd9\u610f\u5473\u7740\u4f60\u53ef\u4ee5\u901a\u8fc7\u5149\u5b66\u5143\u7d20\u6539\u53d8\u7126\u70b9\u7684\u7c7b\u578b\u3002\u7531\u4e8e\u8fd9\u662f\u4e00\u4e2a\u76f8\u5bf9\u7f55\u89c1\u7684\u7528\u4f8b\uff0c\u5982\u679c\u4e0d\u5c0f\u5fc3\u8fdb\u884c\u53ef\u80fd\u4f1a\u9020\u6210\u6df7\u6dc6\uff0c\u56e0\u6b64\u4f7f\u7528<code>optic_</code>\uff08\u6ce8\u610f\u4e0b\u5212\u7ebf\uff09\u521b\u5efa\u591a\u6001\u5149\u5b66\u5143\u7d20\uff1a</p> <pre><code>type Data = {\n    foo: { bar: string }\n    other: boolean\n}\nconst bar = O.optic_&lt;Data&gt;().path('foo.bar')\n</code></pre> <p>\u5149\u5b66\u5143\u7d20\u53ef\u4ee5\u662f\u591a\u6001\u7684\uff0c\u8fd9\u610f\u5473\u7740\u4f60\u53ef\u4ee5\u901a\u8fc7\u5149\u5b66\u5143\u7d20\u6539\u53d8\u7126\u70b9\u7684\u7c7b\u578b\u3002</p> <pre><code>type Data = {\n    foo: { bar: string }\n    other: boolean\n}\nconst bar = O.compose('foo', 'bar')\n</code></pre> <p>\u8ba9\u6211\u4eec\u4fee\u6539<code>bar</code>\uff0c\u4f7f\u5176\u5305\u542b\u539f\u59cb\u5b57\u7b26\u4e32\u7684\u957f\u5ea6\uff1a</p> \u65b9\u6cd5\u94fe\u72ec\u7acb <pre><code>const data: Data = {\n    foo: { bar: 'hello there' },\n    other: true,\n}\n\nconst updated = O.modify(bar)((str) =&gt; str.length)(data)\n// {\n//   foo: { bar: 11 },\n//   other: true\n// }\n</code></pre> <p>\u8fd9\u662f\u4e00\u4e2a\u7c7b\u578b\u5b89\u5168\u7684\u64cd\u4f5c\uff0c\u5373\u7f16\u8bd1\u5668\u77e5\u9053<code>updated.foo.bar</code>\u7684\u7c7b\u578b\u662f<code>number</code>\uff0c\u7f16\u8f91\u5668\u81ea\u52a8\u5b8c\u6210\u5de5\u4f5c\u6b63\u5e38\uff0c\u7b49\u7b49\u3002</p> <p>\u5982\u679c\u4f60\u5728<code>optics-ts</code>\u51fd\u6570\u7684\u8fd4\u56de\u503c\u4e2d\u770b\u5230\u4e86<code>DisallowedTypeChange</code>\u7c7b\u578b\uff0c\u90a3\u5c31\u610f\u5473\u7740\u4f60\u8bd5\u56fe\u901a\u8fc7\u975e\u591a\u6001\uff08\u5355\u6001\uff09\u5149\u5b66\u5143\u7d20\u6539\u53d8\u7c7b\u578b\u3002</p> <pre><code>const data: Data = {\n    foo: { bar: 'hello there' },\n    other: true,\n}\n\nconst updated = O.modify(bar, (str) =&gt; str.length, data)\n// {\n//   foo: { bar: 11 },\n//   other: true\n// }\n</code></pre> <p>\u8fd9\u662f\u4e00\u4e2a\u7c7b\u578b\u5b89\u5168\u7684\u64cd\u4f5c\uff0c\u5373\u7f16\u8bd1\u5668\u77e5\u9053<code>updated.foo.bar</code>\u7684\u7c7b\u578b\u662f<code>number</code>\uff0c\u7f16\u8f91\u5668\u81ea\u52a8\u5b8c\u6210\u5de5\u4f5c\u6b63\u5e38\uff0c\u7b49\u7b49\u3002</p>"},{"location":"two-syntaxes/","title":"\u4e24\u79cd\u8bed\u6cd5","text":"<p>\u81eaoptics-ts v2.2.0\u8d77\uff0c\u5149\u5b66\u6709\u4e24\u79cd\u8bed\u6cd5\uff1a\u65b9\u6cd5\u94fe\u548c\u72ec\u7acb\u5149\u5b66\u3002\u65b9\u6cd5\u94fe\u662f\u9ed8\u8ba4\u7684\uff0c\u7ecf\u8fc7\u8bd5\u9a8c\u548c\u6d4b\u8bd5\u7684\u8bed\u6cd5\u3002\u72ec\u7acb\u8bed\u6cd5\u4ecd\u7136\u662f\u5b9e\u9a8c\u6027\u7684\uff0c\u4f46\u5b83\u53ef\u80fd\u4f1a\u5728\u672a\u6765\u6210\u4e3a\u9ed8\u8ba4\u8bed\u6cd5\u3002</p> <p>\u5728\u6587\u6863\u7684\u5176\u4ed6\u90e8\u5206\uff0c\u6240\u6709\u7684\u4f8b\u5b50\u90fd\u4ee5\u4e24\u79cd\u8bed\u6cd5\u7ed9\u51fa\u3002\u67d0\u4e9b\u5149\u5b66\u5728\u8bed\u4e49\u4e0a\u4e5f\u6709\u7ec6\u5fae\u7684\u5dee\u5f02\uff0c\u8fd9\u4e9b\u90fd\u6709\u660e\u786e\u7684\u6587\u6863\u8bb0\u5f55\u3002</p> <p>\u4ee5\u4e0b\u90e8\u5206\u603b\u7ed3\u4e86\u4e24\u79cd\u8bed\u6cd5\u4e4b\u95f4\u7684\u6700\u5927\u5dee\u5f02\u3002</p>"},{"location":"two-syntaxes/#importing","title":"\u5bfc\u5165","text":"<p>\u65b9\u6cd5\u94fe</p> <pre><code>import * as O from 'optics-ts'\n</code></pre> <p>\u72ec\u7acb</p> <pre><code>import * as O from 'optics-ts/standalone'\n</code></pre>"},{"location":"two-syntaxes/#composing","title":"\u7ec4\u5408","text":"<p>\u65b9\u6cd5\u94fe</p> <p>\u8fd9\u79cd\u8bed\u6cd5\u7684\u540d\u5b57\u662f\"\u65b9\u6cd5\u94fe\"\uff0c\u56e0\u4e3a\u5149\u5b66\u662f\u901a\u8fc7\u65b9\u6cd5\u94fe\u6765\u7ec4\u5408\u7684\uff0c\u4e5f\u88ab\u79f0\u4e3a\u6d41\u7545\u63a5\u53e3\u3002\u7ec4\u5408\u603b\u662f\u4ece\u67d0\u4e2a\u6839\u7c7b\u578b\uff08\u4e0b\u9762\u7684\u4f8b\u5b50\u4e2d\u7684<code>MyType</code>\uff09\u5f00\u59cb\uff0c\u8fd9\u5c06\u5149\u5b66\u7ed1\u5b9a\u5230\u5b83\u64cd\u4f5c\u7684\u6570\u636e\u7ed3\u6784\u7684\u7c7b\u578b\u4e0a\u3002</p> <pre><code>O.optic&lt;MyType&gt;()\n    .prop('foo')\n    .optional()\n    .when((value) =&gt; value &gt; 42)\n</code></pre> <p>\u72ec\u7acb</p> <p>\u8fd9\u79cd\u8bed\u6cd5\u7684\u540d\u5b57\u6765\u6e90\u4e8e\u5149\u5b66\u662f_\u72ec\u7acb_\u7684\u51fd\u6570\u548c\u503c\uff0c\u5373\u5b83\u4eec\"\u6d6e\u52a8\"\uff0c\u800c\u4e0d\u662f\u7ed1\u5b9a\u5230\u4efb\u4f55\u5177\u4f53\u7684\u7c7b\u578b\u4e0a\u3002\u5f53\u7136\uff0c\u5b83\u4eec\u9700\u8981\u6570\u636e\u5177\u6709\u7279\u5b9a\u7684\u5f62\u72b6\uff0c\u4f46\u4f60\u4e0d\u9700\u8981\u5728\u4ee3\u7801\u4e2d\u660e\u786e\u5730\u58f0\u660e\u7c7b\u578b\u3002</p> <p>\u4e0d\u9884\u5148\u5c06\u5149\u5b66\u7ed1\u5b9a\u5230\u4efb\u4f55\u7279\u5b9a\u7c7b\u578b\u7684\u542b\u4e49\u662f\uff0c\u4f60\u9700\u8981\u5728\u67d0\u4e9b\u5730\u65b9\u6dfb\u52a0\u7c7b\u578b\u6ce8\u89e3\uff0c\u6bd4\u5982\u4e0b\u9762\u4f8b\u5b50\u4e2d<code>O.when</code>\u7684\u53c2\u6570<code>(value: number) =&gt; ...</code>\u3002</p> <pre><code>O.compose(\n    'foo',\n    O.optional,\n    O.when((value: number) =&gt; value &gt; 42)\n)\n</code></pre>"},{"location":"two-syntaxes/#currying","title":"\u67ef\u91cc\u5316","text":"<p>\u65b9\u6cd5\u94fe</p> <p>\u50cf<code>O.get</code>\u3001<code>O.modify</code>\u548c<code>O.set</code>\u8fd9\u6837\u7684\u64cd\u4f5c\u51fd\u6570\u53ea\u6709\u5b8c\u5168\u67ef\u91cc\u5316\u7684\u5f62\u5f0f\uff1a</p> <pre><code>O.get(myOptic)(myData)\nO.modify(myOptic)((value) =&gt; value + 1)(myData)\n</code></pre> <p>\u72ec\u7acb</p> <p>\u63d0\u4f9b\u4e86\u67ef\u91cc\u5316\u548c\u975e\u67ef\u91cc\u5316\u7684\u7248\u672c\uff1a</p> <pre><code>O.get(myOptic, myData)\nO.get(myOptic)(myData)\n\nO.modify(myOptic, (value) =&gt; value + 1, myData)\nO.modify(myOptic)((value) =&gt; value + 1, myData)\nO.modify(myOptic)((value) =&gt; value + 1)(myData)\n</code></pre>"},{"location":"two-syntaxes/#tree-shaking","title":"\u6811\u6447","text":"<p>\u65b9\u6cd5\u94fe</p> <p>\u4e0d\u53ef\u80fd\u8fdb\u884c\u6811\u6447\u3002\u6574\u4e2a\u5e93\u603b\u662f\u5305\u542b\u5728\u5305\u4e2d\u3002</p> <p>\u72ec\u7acb</p> <p>\u5b8c\u5168\u53ef\u4ee5\u8fdb\u884c\u6811\u6447\u3002\u53ea\u6709\u4f60\u4f7f\u7528\u7684\u529f\u80fd\u624d\u4f1a\u88ab\u5305\u542b\u5728\u5305\u4e2d\u3002</p>"},{"location":"two-syntaxes/#compilation-speed","title":"\u7f16\u8bd1\u901f\u5ea6","text":"<p>\u770b\u8d77\u6765\u4f7f\u7528\u72ec\u7acb\u8bed\u6cd5\u7f16\u8bd1\u5927\u578b\u7a0b\u5e8f\u6bd4\u4f7f\u7528\u65b9\u6cd5\u94fe\u7a0d\u6162\u3002\u7136\u800c\uff0c\u4e00\u4e2a\u597d\u7684\u3001\u53ef\u91cd\u590d\u7684\u57fa\u51c6\u6d4b\u8bd5\u4ecd\u5728\u5f85\u529e\u4e8b\u9879\u5217\u8868\u4e2d\u3002\u6b64\u5916\uff0cTypeScript\u7f16\u8bd1\u5668\u5728\u672a\u6765\u7684\u6539\u8fdb\u53ef\u80fd\u4f1a\u663e\u8457\u5f71\u54cd\u7f16\u8bd1\u901f\u5ea6\u3002</p>"},{"location":"two-syntaxes/#runtime-performance","title":"\u8fd0\u884c\u65f6\u6027\u80fd","text":"<p>\u4e24\u8005\u4e4b\u95f4\u5e94\u8be5\u6ca1\u6709\u6027\u80fd\u5dee\u5f02\uff0c\u5c3d\u7ba1\u8fd8\u6ca1\u6709\u57fa\u51c6\u6d4b\u8bd5\u6765\u8bc1\u660e\u8fd9\u4e00\u70b9\u3002</p>"}]}